{"created": "2025-12-25T16:11:25.715008", "current_version": "", "project": "Safety-Critical Rust Coding Guidelines", "versions": {"": {"created": "2025-12-25T16:11:25.714996", "creator": {"program": "sphinx_needs", "version": "5.1.0"}, "needs": {"bib_Bib7x9KmPq2nL": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": ".. list-table::\n   :header-rows: 0\n   :widths: auto\n   :class: bibliography-table\n\n   * - :bibentry:`gui_Bib7x9KmPq2nL:RUST-REF-UNION`\n     - The Rust Reference. \"Unions.\" https://doc.rust-lang.org/reference/items/unions.html\n   * - :bibentry:`gui_Bib7x9KmPq2nL:CERT-C-INT34`\n     - SEI CERT C Coding Standard. \"INT34-C. Do not shift an expression by a negative number of bits.\" https://wiki.sei.cmu.edu/confluence/x/ItcxBQ", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "bib_Bib7x9KmPq2nL", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1441, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_Bib7x9KmPq2nL", "parent_needs": ["gui_Bib7x9KmPq2nL"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "bibliography", "type_name": "Bibliography", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "bib_Bob7x9KmPq2nL": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": ".. list-table::\n   :header-rows: 0\n   :widths: auto\n   :class: bibliography-table\n\n   * - :bibentry:`gui_Bob7x9KmPq2nL:RUST-REF-UNION`\n     - The Rust Reference. \"Unions.\" https://doc.rust-lang.org/reference/items/unions.html\n   * - :bibentry:`gui_Bob7x9KmPq2nL:CERT-C-INT34`\n     - SEI CERT C Coding Standard. \"INT34-C. Do not shift an expression by a negative number of bits.\" https://wiki.sei.cmu.edu/confluence/x/ItcxBQ", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "bib_Bob7x9KmPq2nL", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1574, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_Bob7x9KmPq2nL", "parent_needs": ["gui_Bob7x9KmPq2nL"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "bibliography", "type_name": "Bibliography", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_4VFyucETB7C3": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "(example of the same simple expansion using a declarative macro)\n\n.. rust-example::\n\n  // TODO\n  fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_4VFyucETB7C3", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 205, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_66FSqzD55VRZ", "parent_needs": ["gui_66FSqzD55VRZ"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_9pK3h65rfceO": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "The following code implements the same functionality using iteration instead of recursion. The ``stack`` variable is used to maintain the processing context at each step of the loop. This approach provides explicit control over memory usage. If the stack grows beyond a predefined limit due to the structure or size of the input, the function returns an error rather than risking a stack overflow or out-of-memory exception. This ensures more predictable and robust behavior in resource-constrained environments.\n\n.. rust-example::\n\n    // Recursive enum to represent a string or a list of `MyEnum`\n    #[allow(dead_code)]\n    enum MyEnum {\n        Str(String),\n        List(Vec<MyEnum>),\n    }\n\n    /// Concatenates strings from a nested structure of `MyEnum` without using recursion.\n    /// Returns an error if the stack size exceeds `MAX_STACK_SIZE`.\n    #[allow(dead_code)]\n    fn concat_strings_non_recursive(input: &[MyEnum]) -> Result<String, &'static str> {\n        const MAX_STACK_SIZE: usize = 1000;\n        let mut result = String::new();\n        let mut stack = Vec::new();\n\n        // Add all items to the stack\n        stack.extend(input.iter());\n\n        while let Some(item) = stack.pop() {\n            match item {\n                MyEnum::Str(s) => result.insert_str(0, s),\n                MyEnum::List(list) => {\n                    // Add list items to the stack\n                    for sub_item in list.iter() {\n                        stack.push(sub_item);\n                        if stack.len() > MAX_STACK_SIZE {\n                            return Err(\"Too big structure\");\n                        }\n                    }\n                }\n            }\n        }\n        Ok(result)\n    }\n    #\n    # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/associated-items/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_9pK3h65rfceO", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 64, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_ot2Zt3dd6of1", "parent_needs": ["gui_ot2Zt3dd6of1"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Associated Items", "sections": ["Associated Items"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_AEKEOYhBWPMl": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of code example.\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  fn example_function() {\n      // Compliant implementation\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_AEKEOYhBWPMl", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 458, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_WJlWqgIxmE8P", "parent_needs": ["gui_WJlWqgIxmE8P"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_BgUHiRB4kc4b": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Wrapping behavior must be explicitly requested. This compliant example uses wrapping functions.\n\n.. rust-example::\n\n    #[allow(dead_code)]\n    fn add(a: i32, b: i32) -> i32 {\n        a.wrapping_add(b)\n    }\n\n    #[allow(dead_code)]\n    fn sub(a: i32, b: i32) -> i32 {\n        a.wrapping_sub(b)\n    }\n\n    #[allow(dead_code)]\n    fn mul(a: i32, b: i32) -> i32 {\n        a.wrapping_mul(b)\n    }\n    #\n    # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_BgUHiRB4kc4b", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 976, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_dCquvqE1csI3", "parent_needs": ["gui_dCquvqE1csI3"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_BgUHiRB4kc4b_1": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This compliant solution ensures that the addition operation cannot result in arithmetic overflow,\nbased on the maximum range of a signed 32-bit integer.\nFunctions such as\n`overflowing_add <https://doc.rust-lang.org/stable/core/primitive.u32.html#method.overflowing_add>`_,\n`overflowing_sub <https://doc.rust-lang.org/stable/core/primitive.u32.html#method.overflowing_sub>`_, and\n`overflowing_mul <https://doc.rust-lang.org/stable/core/primitive.u32.html#method.overflowing_mul>`_\ncan also be used to detect overflow.\nCode that invoked these functions would typically further restrict the range of possible values,\nbased on the anticipated range of the inputs.\n\n.. rust-example::\n\n    # #[derive(Debug)]\n    #[allow(dead_code)]\n    enum ArithmeticError { Overflow, DivisionByZero }\n    use std::i32::{MAX as INT_MAX, MIN as INT_MIN};\n\n    #[allow(dead_code)]\n    fn add(si_a: i32, si_b: i32) -> Result<i32, ArithmeticError> {\n        if (si_b > 0 && si_a > INT_MAX - si_b)\n            || (si_b < 0 && si_a < INT_MIN - si_b)\n        {\n            Err(ArithmeticError::Overflow)\n        } else {\n            Ok(si_a + si_b)\n        }\n    }\n\n    #[allow(dead_code)]\n    fn sub(si_a: i32, si_b: i32) -> Result<i32, ArithmeticError> {\n        if (si_b < 0 && si_a > INT_MAX + si_b)\n            || (si_b > 0 && si_a < INT_MIN + si_b)\n        {\n            Err(ArithmeticError::Overflow)\n        } else {\n            Ok(si_a - si_b)\n        }\n    }\n\n    #[allow(dead_code)]\n    fn mul(si_a: i32, si_b: i32) -> Result<i32, ArithmeticError> {\n        if si_a == 0 || si_b == 0 {\n            return Ok(0);\n        }\n\n        // Detect overflow before performing multiplication\n        if (si_a == -1 && si_b == INT_MIN) || (si_b == -1 && si_a == INT_MIN) {\n            Err(ArithmeticError::Overflow)\n        } else if (si_a > 0 && (si_b > INT_MAX / si_a || si_b < INT_MIN / si_a))\n            || (si_a < 0 && (si_b > INT_MIN / si_a || si_b < INT_MAX / si_a))\n        {\n            Err(ArithmeticError::Overflow)\n        } else {\n            Ok(si_a * si_b)\n        }\n    }\n    #\n    # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_BgUHiRB4kc4b_1", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 883, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_dCquvqE1csI3", "parent_needs": ["gui_dCquvqE1csI3"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_BgUHiRB4kc4c": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This compliant example uses safe checked addition instead of manual bounds checks.\nChecked functions can reduce readability when complex arithmetic expressions are needed.\n\n.. rust-example::\n\n    # #[derive(Debug)]\n    #[allow(dead_code)]\n    enum ArithmeticError { Overflow, DivisionByZero }\n\n    #[allow(dead_code)]\n    fn add(si_a: i32, si_b: i32) -> Result<i32, ArithmeticError> {\n        si_a.checked_add(si_b).ok_or(ArithmeticError::Overflow)\n    }\n\n    #[allow(dead_code)]\n    fn sub(a: i32, b: i32) -> Result<i32, ArithmeticError> {\n        a.checked_sub(b).ok_or(ArithmeticError::Overflow)\n    }\n\n    #[allow(dead_code)]\n    fn mul(a: i32, b: i32) -> Result<i32, ArithmeticError> {\n        a.checked_mul(b).ok_or(ArithmeticError::Overflow)\n    }\n    #\n    # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_BgUHiRB4kc4c", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 946, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_dCquvqE1csI3", "parent_needs": ["gui_dCquvqE1csI3"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_BgUHiRB4kc4d": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This compliant solution eliminates the possibility of both divide-by-zero errors and arithmetic overflow:\n\n.. rust-example::\n\n    # #[derive(Debug)]\n    #[allow(dead_code)]\n    enum DivError { DivisionByZero, Overflow }\n\n    #[allow(dead_code)]\n    fn div(s_a: i64, s_b: i64) -> Result<i64, DivError> {\n        if s_b == 0 {\n            Err(DivError::DivisionByZero)\n        } else if s_a == i64::MIN && s_b == -1 {\n            Err(DivError::Overflow)\n        } else {\n            Ok(s_a / s_b)\n        }\n    }\n    #\n    # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_BgUHiRB4kc4d", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1122, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_dCquvqE1csI3", "parent_needs": ["gui_dCquvqE1csI3"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_BgUHiSB4kc4b": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Saturation semantics means that instead of wrapping around or resulting in an error,\nany result that falls outside the valid range of the integer type is clamped:\n\n- To the maximum value, if the result were to be greater than the maximum value, or\n- To the minimum value, if the result were to be smaller than the minimum,\n\nSaturation semantics always conform to this rule because they ensure that integer operations do not result in arithmetic overflow.\nThis compliant solution shows how to use saturating functions to provide saturation semantics for some basic arithmetic operations.\n\n.. rust-example::\n\n    #[allow(dead_code)]\n    fn add(a: i32, b: i32) -> i32 {\n        a.saturating_add(b)\n    }\n\n    #[allow(dead_code)]\n    fn sub(a: i32, b: i32) -> i32 {\n        a.saturating_sub(b)\n    }\n\n    #[allow(dead_code)]\n    fn mul(a: i32, b: i32) -> i32 {\n        a.saturating_mul(b)\n    }\n    #\n    # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_BgUHiSB4kc4b", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1035, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_dCquvqE1csI3", "parent_needs": ["gui_dCquvqE1csI3"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_BgUHiSB4kd4b": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "``Saturating<T>`` is a wrapper type in Rust's ``core`` library (``core::num::Saturating<T>``) that makes arithmetic operations on the wrapped value perform saturating arithmetic instead of wrapping, panicking, or overflowing.\n``Saturating<T>`` is useful when you have a section of code or a data type where all arithmetic must be saturating.\nThis compliant solution uses the ``Saturating<T>`` type to define several functions that perform basic integer operations using saturation semantics.\n\n.. rust-example::\n\n    use std::num::Saturating;\n\n    fn add(si_a: Saturating<i32>, si_b: Saturating<i32>) -> Saturating<i32> {\n        si_a + si_b\n    }\n\n    #[allow(dead_code)]\n    fn sub(si_a: Saturating<i32>, si_b: Saturating<i32>) -> Saturating<i32> {\n        si_a - si_b\n    }\n\n    #[allow(dead_code)]\n    fn mul(si_a: Saturating<i32>, si_b: Saturating<i32>) -> Saturating<i32> {\n        si_a * si_b\n    }\n\n    fn main() {\n        let si_a = Saturating(i32::MAX);\n        let si_b = Saturating(i32::MAX);\n        println!(\"{} + {} = {}\", si_a, si_b, add(si_a, si_b))\n    }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_BgUHiSB4kd4b", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1067, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_dCquvqE1csI3", "parent_needs": ["gui_dCquvqE1csI3"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_BhUHiRB4kc4b": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Wrapping behavior call also be achieved using the ``Wrapping<T>`` type as in this compliant solution.\nThe ``Wrapping<T>`` type is a ``struct`` found in the ``std::num`` module that explicitly enables two's complement\nwrapping arithmetic for the inner type ``T`` (which must be an integer or ``usize/isize``).\nThe ``Wrapping<T>`` type provides a consistent way to force wrapping behavior in all build modes,\nwhich is useful in specific scenarios like implementing cryptography or hash functions where wrapping arithmetic is the intended behavior.\n\n.. rust-example::\n\n    use std::num::Wrapping;\n\n    fn add(si_a: Wrapping<i32>, si_b: Wrapping<i32>) -> Wrapping<i32> {\n        si_a + si_b\n    }\n\n    #[allow(dead_code)]\n    fn sub(si_a: Wrapping<i32>, si_b: Wrapping<i32>) -> Wrapping<i32> {\n        si_a - si_b\n    }\n\n    #[allow(dead_code)]\n    fn mul(si_a: Wrapping<i32>, si_b: Wrapping<i32>) -> Wrapping<i32> {\n        si_a * si_b\n    }\n\n    fn main() {\n        let si_a = Wrapping(i32::MAX);\n        let si_b = Wrapping(i32::MAX);\n        println!(\"{} + {} = {}\", si_a, si_b, add(si_a, si_b))\n    }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_BhUHiRB4kc4b", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1001, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_dCquvqE1csI3", "parent_needs": ["gui_dCquvqE1csI3"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_Bib7x9KmPq2nL": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This example shows the correct way to follow the guideline.\n\n.. rust-example::\n\n   fn main() {\n       // Compliant code example\n       let x: i32 = 42;\n       println!(\"{}\", x);\n   }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_Bib7x9KmPq2nL", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1427, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_Bib7x9KmPq2nL", "parent_needs": ["gui_Bib7x9KmPq2nL"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_Bob7x9KmPq2nL": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This example shows the correct way to follow the guideline.\n\n.. rust-example::\n\n   fn main() {\n       // Compliant code example\n       let x: i32 = 42;\n       println!(\"{}\", x);\n   }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_Bob7x9KmPq2nL", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1560, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_Bob7x9KmPq2nL", "parent_needs": ["gui_Bob7x9KmPq2nL"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_GLP05s9c1g8N": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of code example.\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  fn example_function() {\n      // Compliant implementation\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_GLP05s9c1g8N", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 258, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_8hs33nyp0ipX", "parent_needs": ["gui_8hs33nyp0ipX"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_Mg8ePOgbGJeW": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of code example.\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  fn example_function() {\n      // Compliant implementation\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_Mg8ePOgbGJeW", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 51, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_13XWp3mb0g2P", "parent_needs": ["gui_13XWp3mb0g2P"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_Pw7YCh4Iv47Z": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of code example\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  fn example_function() {\n      // Compliant implementation\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_Pw7YCh4Iv47Z", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 572, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_h0uG1C9ZjryA", "parent_needs": ["gui_h0uG1C9ZjryA"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_Ri9pP5Ch3kcc": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Compliant examples from `Do not use an integer type as a divisor during integer division` are also valid for this rule.\nAdditionally, the check for zero can be performed manually, as in this compliant example.\nHowever, as the complexity of the control flow leading to the invariant increases,\nit becomes increasingly harder for both programmers and static analysis tools to reason about it.\n\nNote that the test for arithmetic overflow is not necessary for unsigned integers.\n\n.. rust-example::\n\n   fn main() {\n       // Checking for zero by hand\n       let x = 0u32;\n       let _y = if x != 0u32 {\n           5u32 / x\n       } else {\n           0u32\n       };\n\n       let _z = if x != 0u32 {\n           5u32 % x\n       } else {\n           0u32\n       };\n   }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_Ri9pP5Ch3kcc", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1293, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_kMbiWbn8Z6g5", "parent_needs": ["gui_kMbiWbn8Z6g5"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_Ux1WqHbGKV73": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This compliant example test the value of ``sh`` to ensure the value of the right operand is negative or greater\nthan or equal to the width of the left operand.\n\n.. rust-example::\n\n    fn main() {\n        let bits: u32 = 61;\n        let shifts = vec![-1, 0, 4, 40];\n\n        for sh in shifts {\n            if sh >= 0 && sh < 32 {\n                println!(\"{bits} << {sh} = {}\", bits << sh);\n            }\n         }\n    }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_Ux1WqHbGKV73", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 464, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_LvmzGKdsAgI5", "parent_needs": ["gui_LvmzGKdsAgI5"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_Ux1WqHbGKV74": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "The call to ``bits.overflowing_shl(sh)`` in this noncompliant shifts ``bits`` left by ``sh`` bits.\nReturns a tuple of the shifted version of self along with a boolean indicating whether the shift value was larger than or equal to the number of bits.\nIf the shift value is too large, then value is masked (N-1) where N is the number of bits, and this value is used to perform the shift.\n\n  .. rust-example::\n\n     fn safe_shl(bits: u32, shift: u32) -> u32 {\n         let (result, overflowed) = bits.overflowing_shl(shift);\n         if overflowed {\n             0\n         } else {\n             result\n         }\n     }\n\n     fn main() {\n         let bits: u32 = 61;\n         let shifts = vec![4, 40];\n\n         for sh in shifts {\n             let result = safe_shl(bits, sh);\n             println!(\"{bits} << {sh} = {result}\");\n         }\n     }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_Ux1WqHbGKV74", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 484, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_LvmzGKdsAgI5", "parent_needs": ["gui_LvmzGKdsAgI5"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_W08ckDrkOhkt": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "We specify the concrete target types for our pointer casts resulting in a compilation error if the function signature of ``with_base`` is changed.\n\n.. rust-example::\n   :miri:\n\n   #[repr(C)]\n   #[allow(dead_code)]\n   struct Base {\n      position: (u32, u32)\n   }\n\n   #[repr(C)]\n   #[allow(dead_code)]\n   struct Extended {\n      base: Base,\n      scale: f32\n   }\n\n   #[allow(dead_code)]\n   fn compliant_example(extended: &Extended) {\n      let extended = extended as *const Extended;\n      with_base(unsafe { &*(extended as *const Base) })\n   }\n\n   fn with_base(_: &Base) {}\n   #\n   # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_W08ckDrkOhkt", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 323, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_HDnAZ7EZ4z6G", "parent_needs": ["gui_HDnAZ7EZ4z6G"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_WTe7GoPu5Ez1": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This compliant example uses newtypes to create distinct types for ``Meters``, ``Seconds``, and ``MetersPerSecond``.\nThe compiler enforces correct usage, preventing accidental swapping of parameters.\nThe function signature clearly conveys the intended semantics of each parameter and return value.\n\n .. rust-example::\n\n   use std::ops::Div;\n\n   #[derive(Debug, Clone, Copy)]\n   struct Meters(u32);\n\n   #[derive(Debug, Clone, Copy)]\n   struct Seconds(u32);\n\n   #[derive(Debug, Clone, Copy)]\n   struct MetersPerSecond(u32);\n\n   impl Div<Seconds> for Meters {\n       type Output = MetersPerSecond;\n\n       fn div(self, rhs: Seconds) -> Self::Output {\n            MetersPerSecond(self.0 / rhs.0)\n       }\n    }\n\n    fn main() {\n        let d = Meters(100);\n        let t = Seconds(10);\n        let result = d / t;  // Clean and type-safe!\n        println!(\"Speed: {} m/s\", result.0);  // Access the inner value\n    }", "created_at": "", "decidability": "", "docname": "coding-guidelines/types-and-traits/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_WTe7GoPu5Ez1", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 109, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_xztNdXA2oFNC", "parent_needs": ["gui_xztNdXA2oFNC"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Types and Traits", "sections": ["Types and Traits"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_cFPg6y7upNdl": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of code example.\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  fn example_function() {\n      // Compliant implementation\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_cFPg6y7upNdl", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 629, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_uuDOArzyO3Qw", "parent_needs": ["gui_uuDOArzyO3Qw"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_iPTgzrvO7qr3": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "The same functionality, implemented as a function with explicit borrowing:\n\n.. rust-example::\n\n  fn increment_and_double(x: &mut i32) -> i32 {\n      *x += 1; // mutation is explicit\n      *x * 2\n  }\n\n  fn main() {\n      let mut num = 5;\n      let result = increment_and_double(&mut num);\n      println!(\"Result: {}, Num: {}\", result, num);\n      // Result: 12, Num: 6\n  }\n\nThe function version makes the mutation and borrowing explicit in its signature, improving readability, safety, and debuggability.", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_iPTgzrvO7qr3", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 141, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_2jjWUoF1teOY", "parent_needs": ["gui_2jjWUoF1teOY"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_k1CD6xoZxhXb": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Checked division prevents division by zero from occurring.\nThe programmer can then handle the returned :std:`std::option::Option`.\nUsing checked division and remainder is particularly important in the signed integer case,\nwhere arithmetic overflow can also occur when dividing the minimum representable value by -1.\n\n.. rust-example::\n\n   fn main() {\n       // Using the checked division API\n       let _y = match 5i32.checked_div(0) {\n           None => 0,\n           Some(r) => r,\n       };\n\n       // Using the checked remainder API\n       let _z = match 5i32.checked_rem(0) {\n           None => 0,\n           Some(r) => r,\n       };\n   }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_k1CD6xoZxhXb", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 69, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_7y0GAMmtMhch", "parent_needs": ["gui_7y0GAMmtMhch"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_k1CD6xoZxhXc": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This compliant solution creates a divisor using :std:`std::num::NonZero`.\n:std:`std::num::NonZero` is a wrapper around primitive integer types that guarantees the contained value is never zero.\n:std:`std::num::NonZero::new` creates a new binding that represents a value that is known not to be zero.\nThis ensures that functions operating on its value can correctly assume that they are not being given zero as their input.\n\nNote that the test for arithmetic overflow that occurs when dividing the minimum representable value by -1 is unnecessary\nin this compliant example because the result of the division expression is an unsigned integer type.\n\n.. rust-example::\n   :version: 1.79\n\n   use std::num::NonZero;\n\n   fn main() {\n       let x = 0u32;\n       if let Some(divisor) = NonZero::<u32>::new(x) {\n           let _result = 5u32 / divisor;\n       }\n   }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_k1CD6xoZxhXc", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 94, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_7y0GAMmtMhch", "parent_needs": ["gui_7y0GAMmtMhch"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_oBoluiKSvREu": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This compliant solution uses a struct to provide storage for both the pointer and the flag value.\nThis solution is portable to machines of different word sizes, both smaller and larger than 32 bits,\nworking even when pointers cannot be represented in any integer type.\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  struct PtrFlag {\n    pointer: * const u32,\n    flag: u32\n  }\n\n  #[allow(dead_code)]\n  fn f2(flag: u32, ptr: * const u32) {\n    let _ptrflag = PtrFlag {\n      pointer: ptr,\n      flag: flag\n    };\n    /* ... */\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_oBoluiKSvREu", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1197, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_iv9yCMHRgpE0", "parent_needs": ["gui_iv9yCMHRgpE0"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_oneKuF52yzrx": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "There is no compliant example of this operation.", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_oneKuF52yzrx", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 589, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_PM8Vpf7lZ51U", "parent_needs": ["gui_PM8Vpf7lZ51U"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_pO5gP1aj2v4F": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of code example.\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  fn example_function() {\n      // Compliant implementation\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_pO5gP1aj2v4F", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 315, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_FRLaMIMb4t3S", "parent_needs": ["gui_FRLaMIMb4t3S"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_ti7GWHCOhUvT": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of code example.\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  fn example_function() {\n      // Compliant implementation\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_ti7GWHCOhUvT", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 515, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_a1mHfjgKk4Xr", "parent_needs": ["gui_a1mHfjgKk4Xr"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_uilHTIOgxD37": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Valid conversions that are guaranteed to preserve exact values can be communicated\nbetter with ``into()`` or ``from()``.\nValid conversions that risk losing value, where doing so would be an error, can\ncommunicate this and include an error check, with ``try_into`` or ``try_from``.\nOther forms of conversion may find ``transmute`` better communicates their intent.\n\n.. rust-example::\n   :miri:\n\n   use std::convert::TryInto;\n\n   #[allow(dead_code)]\n   fn f2(x: u16, y: i32, _z: u64, w: u8) {\n     let _a: char            = w.into();\n     let _b: Result <u32, _> = y.try_into(); // produce an error on range clip\n     let _c: i64             = x.into();\n\n     let d = f32::from(x);  // u16 is within range, u32 is not\n     let _e = f64::from(d);\n     // let f = f32::from(e); // no From exists\n\n     // let g = ...            // no From exists\n\n     let h: u32 = 0;\n     let p1: * const u32 = &h;\n     let a1 = p1 as usize;     // (compliant)\n\n     unsafe {\n       let _a2: usize = std::mem::transmute(p1);  // OK\n       let _a3: u64   = std::mem::transmute(p1);  // OK, size is checked\n       // let a3: u16   = std::mem::transmute(p1);  // invalid, different sizes\n\n       #[allow(integer_to_ptr_transmutes)]\n       let _p2: * const u32 = std::mem::transmute(a1); // OK\n       #[allow(integer_to_ptr_transmutes)]\n       let _p3: * const u32 = std::mem::transmute(a1); // OK\n     }\n\n     unsafe {\n       // does something entirely different,\n       // reinterpreting the bits of z as the IEEE bit pattern of a double\n       // precision object, rather than converting the integer value\n       #[allow(unnecessary_transmutes)]\n       let _f1: f64 = std::mem::transmute(_z);\n     }\n   }\n   #\n   # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_uilHTIOgxD37", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 206, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_ADHABsmK9FXz", "parent_needs": ["gui_ADHABsmK9FXz"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_xpPQqYeEPGIo": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This compliant example performs left shifts via the `checked_shl <https://doc.rust-lang.org/core/index.html?search=%22checked_shl%22>`_\nfunction and right shifts via the `checked_shr <https://doc.rust-lang.org/core/index.html?search=%22checked_shr%22>`_ function.\nBoth of these functions are defined in `core <https://doc.rust-lang.org/core/index.html>`_.\n\n  ``<T>::checked_shl(M)`` returns a value of type ``Option<T>``:\n\n  * If ``M < 0``\\ , the output is ``None``\n  * If ``0 <= M < N`` for ``T`` of size ``N`` bits, then the output is ``Some(T)``\n  * If ``N <= M``\\ , the output is ``None``\n\n  Checked shift operations make programmer intent explicit and eliminates out-of-range shifts.\n  Shifting by:\n\n  * negative values is impossible because ``checked_shl`` only accepts unsigned integers as shift lengths, and\n  * greater than or equal to the number of bits that exist in the left operand returns a ``None`` value.\n\n  .. rust-example::\n\n     fn main() {\n         let bits : u32 = 61;\n         // let shifts = vec![-1, 4, 40];\n         //                    ^--- Compiler rejects negative shifts\n         let shifts = vec![4, 40];\n\n         for sh in shifts {\n             println!(\"{bits} << {sh} = {:?}\", bits.checked_shl(sh));\n         }\n     }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_xpPQqYeEPGIo", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 787, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_RHvQj8BHlz9b", "parent_needs": ["gui_RHvQj8BHlz9b"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "compl_ex_xyaShvxL9JAM": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "The following is a macro refers to Vec using a global path. Even if there is a different struct called\n`Vec` defined in the scope of the macro usage, this macro will unambiguously use the `Vec` from the\nStandard Library.\n\n.. rust-example::\n\n  #[macro_export]\n  macro_rules! my_vec_global {\n      ( $( $x:expr ),* ) => {\n          {\n              let mut temp_vec = ::std::vec::Vec::new(); // global path\n              $(\n                  temp_vec.push($x);\n              )*\n              temp_vec\n          }\n      };\n  }\n\n  fn main() {\n      let _ = my_vec_global![1, 2, 3];\n  }", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "compl_ex_xyaShvxL9JAM", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 389, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_SJMrWDYZ0dN4", "parent_needs": ["gui_SJMrWDYZ0dN4"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "compliant_example", "type_name": "Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_13XWp3mb0g2P": {"arch": {}, "avatar": "", "category": "required", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Attribute macros shall neither be declared nor invoked.\nPrefer less powerful macros that only extend source code.\n\n.. rationale::\n   :id: rat_X8uCF5yx7Mpo\n   :status: draft\n\n   Attribute macros are able to rewrite items entirely or in other unexpected ways which can cause confusion and introduce errors.\n\n.. non_compliant_example::\n   :id: non_compl_ex_eW374waRPbeL\n   :status: draft\n\n   The ``#[test]`` attribute macro transforms the function into a test harness entry point.\n\n   .. rust-example::\n       :no_run:\n\n       #[test]  // non-compliant: attribute macro rewrites the item\n       fn example_test() {\n           assert!(true);\n       }\n       #\n       # fn main() {}\n\n.. compliant_example::\n   :id: compl_ex_Mg8ePOgbGJeW\n   :status: draft\n\n   Explanation of code example.\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     fn example_function() {\n         // Compliant implementation\n     }\n     #\n     # fn main() {}", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_4vjbkm4ceymk", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_13XWp3mb0g2P", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 16, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_X8uCF5yx7Mpo", "non_compl_ex_eW374waRPbeL", "compl_ex_Mg8ePOgbGJeW"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "todo", "scope": "system", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["reduce-human-error"], "template": null, "title": "Attribute macros shall not be used", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_2jjWUoF1teOY": {"arch": {}, "avatar": "", "category": "mandatory", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Functions should always be preferred over macros, except when macros provide essential functionality that functions cannot, such as variadic interfaces, compile-time code generation, or syntax extensions via custom derive and attribute macros.\n\n|\n\n.. rationale::\n   :id: rat_M9bp23ctkzQ7\n   :status: draft\n\n   Although the compiler reports both the macro expansion and its invocation site, diagnostics originating within macros can be more difficult to interpret than those from ordinary function or type definitions. Complex or deeply nested macros may obscure intent and hinder static analysis, increasing the risk of misinterpretation or overlooked errors during code review.\n\n\n   **Debugging Complexity**\n\n   - Errors point to expanded code rather than source locations, making it difficult to trace compile-time errors back to the original macro invocation.\n\n   **Optimization**\n\n   - Macros may inhibit compiler optimizations that work better with functions.\n   - Macros act like ``#[inline(always)]`` functions, which can lead to code bloat.\n   - They don't benefit from the compiler's inlining heuristics, missing out on selective inlining where the compiler decides when inlining is beneficial.\n\n   **Functions provide**\n\n   - Clear type signatures.\n   - Predictable behavior.\n   - Proper stack traces.\n   - Consistent optimization opportunities.\n\n\n.. non_compliant_example::\n   :id: non_compl_ex_TZgk2vG42t2r\n   :status: draft\n\n   Using a macro where a simple function would suffice, leads to hidden mutation:\n\n   .. rust-example::\n\n     macro_rules! increment_and_double {\n         ($x:expr) => {\n             {\n                 $x += 1; // mutation is implicit\n                 $x * 2\n             }\n         };\n     }\n\n     fn main() {\n         let mut num = 5;\n         let result = increment_and_double!(num);\n         println!(\"Result: {}, Num: {}\", result, num);\n         // Result: 12, Num: 6\n     }\n\n   In this example, calling the macro both increments and returns the value in one go\u2014without any clear indication in its \"signature\" that it mutates its argument. As a result, num is changed behind the scenes, which can surprise readers and make debugging more difficult.\n\n\n.. compliant_example::\n   :id: compl_ex_iPTgzrvO7qr3\n   :status: draft\n\n   The same functionality, implemented as a function with explicit borrowing:\n\n   .. rust-example::\n\n     fn increment_and_double(x: &mut i32) -> i32 {\n         *x += 1; // mutation is explicit\n         *x * 2\n     }\n\n     fn main() {\n         let mut num = 5;\n         let result = increment_and_double(&mut num);\n         println!(\"Result: {}, Num: {}\", result, num);\n         // Result: 12, Num: 6\n     }\n\n   The function version makes the mutation and borrowing explicit in its signature, improving readability, safety, and debuggability.", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_xa7lp0zg1ol2", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_2jjWUoF1teOY", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 75, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_M9bp23ctkzQ7", "non_compl_ex_TZgk2vG42t2r", "compl_ex_iPTgzrvO7qr3"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "todo", "scope": "system", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["reduce-human-error"], "template": null, "title": "A macro should not be used in place of a function", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_66FSqzD55VRZ": {"arch": {}, "avatar": "", "category": "advisory", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Macros should be expressed using declarative syntax\nin preference to procedural syntax.\n\n.. rationale::\n   :id: rat_AmCavSymv3Ev\n   :status: draft\n\n   Procedural macros are not restricted to pure transcription and can contain arbitrary Rust code.\n   This means they can be harder to understand, and cannot be as easily proved to work as intended.\n   Procedural macros can have arbitrary side effects, which can exhaust compiler resources or\n   expose a vulnerability for users of adopted code.\n\n.. non_compliant_example::\n   :id: non_compl_ex_pJhVZW6a1HP9\n   :status: draft\n\n   (example of a simple expansion using a proc-macro)\n\n   .. rust-example::\n\n     // TODO\n     fn main() {}\n\n.. compliant_example::\n   :id: compl_ex_4VFyucETB7C3\n   :status: draft\n\n   (example of the same simple expansion using a declarative macro)\n\n   .. rust-example::\n\n     // TODO\n     fn main() {}", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_wn1i6hzg2ff7", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_66FSqzD55VRZ", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 172, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_AmCavSymv3Ev", "non_compl_ex_pJhVZW6a1HP9", "compl_ex_4VFyucETB7C3"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "1.85.0;1.85.1", "scope": "crate", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["readability", "reduce-human-error"], "template": null, "title": "Procedural macros should not be used", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_7y0GAMmtMhch": {"arch": {}, "avatar": "", "category": "advisory", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Do not provide a right operand of\n`integer type <https://rust-lang.github.io/fls/types-and-traits.html#integer-types>`_\nduring a `division expression\n<https://rust-lang.github.io/fls/expressions.html#syntax_divisionexpression>`_ or `remainder expression\n<https://rust-lang.github.io/fls/expressions.html#syntax_remainderexpression>`_ when the left operand also has integer type.\n\n This rule applies to the following primitive integer types:\n\n * ``i8``\n * ``i16``\n * ``i32``\n * ``i64``\n * ``i128``\n * ``u8``\n * ``u16``\n * ``u32``\n * ``u64``\n * ``u128``\n * ``usize``\n * ``isize``\n\n.. rationale::\n   :id: rat_vLFlPWSCHRje\n   :status: draft\n\n   Integer division and integer remainder division both panic when the right operand has a value of zero.\n   Division by zero is undefined in mathematics because it leads to contradictions and there is no consistent value that can be assigned as its result.\n\n.. non_compliant_example::\n   :id: non_compl_ex_0XeioBrgfh5z\n   :status: draft\n\n   Both the division and remainder operations in this non-compliant example will panic if evaluated because the right operand is zero.\n\n   .. rust-example::\n       :compile_fail:\n\n       fn main() {\n           let x = 0;\n           let _y = 5 / x; // This line will panic.\n           let _z = 5 % x; // This line would also panic.\n       }\n\n.. compliant_example::\n   :id: compl_ex_k1CD6xoZxhXb\n   :status: draft\n\n   Checked division prevents division by zero from occurring.\n   The programmer can then handle the returned :std:`std::option::Option`.\n   Using checked division and remainder is particularly important in the signed integer case,\n   where arithmetic overflow can also occur when dividing the minimum representable value by -1.\n\n   .. rust-example::\n\n      fn main() {\n          // Using the checked division API\n          let _y = match 5i32.checked_div(0) {\n              None => 0,\n              Some(r) => r,\n          };\n\n          // Using the checked remainder API\n          let _z = match 5i32.checked_rem(0) {\n              None => 0,\n              Some(r) => r,\n          };\n      }\n\n.. compliant_example::\n   :id: compl_ex_k1CD6xoZxhXc\n   :status: draft\n\n   This compliant solution creates a divisor using :std:`std::num::NonZero`.\n   :std:`std::num::NonZero` is a wrapper around primitive integer types that guarantees the contained value is never zero.\n   :std:`std::num::NonZero::new` creates a new binding that represents a value that is known not to be zero.\n   This ensures that functions operating on its value can correctly assume that they are not being given zero as their input.\n\n   Note that the test for arithmetic overflow that occurs when dividing the minimum representable value by -1 is unnecessary\n   in this compliant example because the result of the division expression is an unsigned integer type.\n\n   .. rust-example::\n      :version: 1.79\n\n      use std::num::NonZero;\n\n      fn main() {\n          let x = 0u32;\n          if let Some(divisor) = NonZero::<u32>::new(x) {\n              let _result = 5u32 / divisor;\n          }\n      }", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_Q9dhNiICGIfr", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_7y0GAMmtMhch", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 16, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_vLFlPWSCHRje", "non_compl_ex_0XeioBrgfh5z", "compl_ex_k1CD6xoZxhXb", "compl_ex_k1CD6xoZxhXc"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "latest", "scope": "module", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["numerics", "subset"], "template": null, "title": "Do not use an integer type as a divisor during integer division", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_8hs33nyp0ipX": {"arch": {}, "avatar": "", "category": "mandatory", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Description of the guideline goes here.\n\n.. rationale::\n   :id: rat_e9iS187skbHH\n   :status: draft\n\n   Explanation of why this guideline is important.\n\n.. non_compliant_example::\n   :id: non_compl_ex_lRt4LBen6Lkc\n   :status: draft\n\n   Explanation of code example.\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     fn example_function() {\n         // Non-compliant implementation\n     }\n     #\n     # fn main() {}\n\n.. compliant_example::\n   :id: compl_ex_GLP05s9c1g8N\n   :status: draft\n\n   Explanation of code example.\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     fn example_function() {\n         // Compliant implementation\n     }\n     #\n     # fn main() {}", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_xlfo7di0gsqz", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_8hs33nyp0ipX", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 225, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_e9iS187skbHH", "non_compl_ex_lRt4LBen6Lkc", "compl_ex_GLP05s9c1g8N"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "todo", "scope": "system", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["reduce-human-error"], "template": null, "title": "Shall ensure complete hygiene of macros", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_ADHABsmK9FXz": {"arch": {}, "avatar": "", "category": "advisory", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "The binary operator ``as`` should not be used with:\n\n* a numeric type, including all supported integer, floating, and machine-dependent arithmetic types; or\n* ``bool``; or\n* ``char``\n\nas either the right operand or the type of the left operand.\n\n**Exception:** ``as`` may be used with ``usize`` as the right operand and an expression of raw pointer\ntype as the left operand.\n\n.. rationale::\n   :id: rat_v56bjjcveLxQ\n   :status: draft\n\n   Although the conversions performed by ``as`` between numeric types are all well-defined, ``as`` coerces\n   the value to fit in the destination type, which may result in unexpected data loss if the value needs to\n   be truncated, rounded, or produce a nearest possible non-equal value.\n\n   Although some conversions are lossless, others are not symmetrical. Instead of relying on either a defined\n   lossy behaviour or risking loss of precision, the code can communicate intent by using ``Into`` or ``From``\n   and ``TryInto`` or ``TryFrom`` to signal which conversions are intended to perfectly preserve the original\n   value, and which are intended to be fallible. The latter cannot be used from const functions, indicating\n   that these should avoid using fallible conversions.\n\n   A pointer-to-address cast does not lose value, but will be truncated unless the destination type is large\n   enough to hold the address value. The ``usize`` type is guaranteed to be wide enough for this purpose.\n\n   A pointer-to-address cast is not symmetrical because the resulting pointer may not point to a valid object,\n   may not point to an object of the right type, or may not be properly aligned.\n   If a conversion in this direction is needed, :std:`std::mem::transmute` will communicate the intent to perform\n   an unsafe operation.\n\n.. non_compliant_example::\n   :id: non_compl_ex_hzGUYoMnK59w\n   :status: draft\n\n   ``as`` used here can change the value range or lose precision.\n   Even when it doesn't, nothing enforces the correct behaviour or communicates whether\n   we intend to allow lossy conversions, or only expect valid conversions.\n\n   .. rust-example::\n\n      #[allow(dead_code)]\n      fn f1(x: u16, y: i32, _z: u64, w: u8) {\n        let _a = w as char;           // non-compliant\n        let _b = y as u32;            // non-compliant - changes value range, converting negative values\n        let _c = x as i64;            // non-compliant - could use .into()\n\n        let d = y as f32;            // non-compliant - lossy\n        let e = d as f64;            // non-compliant - could use .into()\n        let _f = e as f32;            // non-compliant - lossy\n\n        let _g = e as i64;            // non-compliant - lossy despite object size\n\n        let b: u32 = 0;\n        let p1: * const u32 = &b;\n        let _a1 = p1 as usize;        // compliant by exception\n        let _a2 = p1 as u16;          // non-compliant - may lose address range\n        let _a3 = p1 as u64;          // non-compliant - use usize to indicate intent\n\n        let a1 = p1 as usize;\n        let _p2 = a1 as * const u32;  // non-compliant - prefer transmute\n        let a2 = p1 as u16;\n        let _p3 = a2 as * const u32;  // non-compliant (and most likely not in a valid address range)\n      }\n      #\n      # fn main() {}\n\n.. compliant_example::\n   :id: compl_ex_uilHTIOgxD37\n   :status: draft\n\n   Valid conversions that are guaranteed to preserve exact values can be communicated\n   better with ``into()`` or ``from()``.\n   Valid conversions that risk losing value, where doing so would be an error, can\n   communicate this and include an error check, with ``try_into`` or ``try_from``.\n   Other forms of conversion may find ``transmute`` better communicates their intent.\n\n   .. rust-example::\n      :miri:\n\n      use std::convert::TryInto;\n\n      #[allow(dead_code)]\n      fn f2(x: u16, y: i32, _z: u64, w: u8) {\n        let _a: char            = w.into();\n        let _b: Result <u32, _> = y.try_into(); // produce an error on range clip\n        let _c: i64             = x.into();\n\n        let d = f32::from(x);  // u16 is within range, u32 is not\n        let _e = f64::from(d);\n        // let f = f32::from(e); // no From exists\n\n        // let g = ...            // no From exists\n\n        let h: u32 = 0;\n        let p1: * const u32 = &h;\n        let a1 = p1 as usize;     // (compliant)\n\n        unsafe {\n          let _a2: usize = std::mem::transmute(p1);  // OK\n          let _a3: u64   = std::mem::transmute(p1);  // OK, size is checked\n          // let a3: u16   = std::mem::transmute(p1);  // invalid, different sizes\n\n          #[allow(integer_to_ptr_transmutes)]\n          let _p2: * const u32 = std::mem::transmute(a1); // OK\n          #[allow(integer_to_ptr_transmutes)]\n          let _p3: * const u32 = std::mem::transmute(a1); // OK\n        }\n\n        unsafe {\n          // does something entirely different,\n          // reinterpreting the bits of z as the IEEE bit pattern of a double\n          // precision object, rather than converting the integer value\n          #[allow(unnecessary_transmutes)]\n          let _f1: f64 = std::mem::transmute(_z);\n        }\n      }\n      #\n      # fn main() {}", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_otaxe9okhdr1", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_ADHABsmK9FXz", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 127, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_v56bjjcveLxQ", "non_compl_ex_hzGUYoMnK59w", "compl_ex_uilHTIOgxD37"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "<TODO>", "scope": "module", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["subset", "reduce-human-error"], "template": null, "title": "The 'as' operator should not be used with numeric operands", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_Bib7x9KmPq2nL": {"arch": {}, "avatar": "", "category": "advisory", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This is an example guideline demonstrating the bibliography feature.\n\nAs documented in :cite:`gui_Bib7x9KmPq2nL:RUST-REF-UNION`, union types in Rust have specific safety requirements.\nThe CERT C Coding Standard :cite:`gui_Bib7x9KmPq2nL:CERT-C-INT34` provides guidance on avoiding undefined behavior\nin shift operations, which applies to Rust as well.\n\n.. rationale::\n   :id: rat_Bib7x9KmPq2nL\n   :status: draft\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   Refer to :cite:`gui_Bib7x9KmPq2nL:RUST-REF-UNION` for more details.\n\n.. non_compliant_example::\n   :id: non_compl_ex_Bib7x9KmPq2nL\n   :status: draft\n\n   This example shows code that violates the guideline.\n\n   .. rust-example::\n\n      fn main() {\n          // Non-compliant code example\n          let x = 42;\n          println!(\"{}\", x);\n      }\n\n.. compliant_example::\n   :id: compl_ex_Bib7x9KmPq2nL\n   :status: draft\n\n   This example shows the correct way to follow the guideline.\n\n   .. rust-example::\n\n      fn main() {\n          // Compliant code example\n          let x: i32 = 42;\n          println!(\"{}\", x);\n      }\n\n.. bibliography::\n   :id: bib_Bib7x9KmPq2nL\n   :status: draft\n\n   .. list-table::\n      :header-rows: 0\n      :widths: auto\n      :class: bibliography-table\n\n      * - :bibentry:`gui_Bib7x9KmPq2nL:RUST-REF-UNION`\n        - The Rust Reference. \"Unions.\" https://doc.rust-lang.org/reference/items/unions.html\n      * - :bibentry:`gui_Bib7x9KmPq2nL:CERT-C-INT34`\n        - SEI CERT C Coding Standard. \"INT34-C. Do not shift an expression by a negative number of bits.\" https://wiki.sei.cmu.edu/confluence/x/ItcxBQ", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_69zyas59o8ff", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_Bib7x9KmPq2nL", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1331, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_Bib7x9KmPq2nL", "non_compl_ex_Bib7x9KmPq2nL", "compl_ex_Bib7x9KmPq2nL", "bib_Bib7x9KmPq2nL"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "1.0.0-latest", "scope": "module", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["safety", "undefined-behavior"], "template": null, "title": "Example guideline with bibliography", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_Bob7x9KmPq2nL": {"arch": {}, "avatar": "", "category": "advisory", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This is an example guideline demonstrating the bibliography feature.\n\nAs documented in :cite:`gui_Bob7x9KmPq2nL:RUST-REF-UNION`, union types in Rust have specific safety requirements.\nThe CERT C Coding Standard :cite:`gui_Bob7x9KmPq2nL:CERT-C-INT34` provides guidance on avoiding undefined behavior\nin shift operations, which applies to Rust as well.\n\n.. rationale::\n   :id: rat_Bob7x9KmPq2nL\n   :status: draft\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   This guideline demonstrates how to include bibliographic references in coding guidelines.\n   References help users find authoritative sources for the recommendations made.\n\n   Refer to :cite:`gui_Bob7x9KmPq2nL:RUST-REF-UNION` for more details.\n\n.. non_compliant_example::\n   :id: non_compl_ex_Bob7x9KmPq2nL\n   :status: draft\n\n   This example shows code that violates the guideline.\n\n   .. rust-example::\n\n      fn main() {\n          // Non-compliant code example\n          let x = 42;\n          println!(\"{}\", x);\n      }\n\n.. compliant_example::\n   :id: compl_ex_Bob7x9KmPq2nL\n   :status: draft\n\n   This example shows the correct way to follow the guideline.\n\n   .. rust-example::\n\n      fn main() {\n          // Compliant code example\n          let x: i32 = 42;\n          println!(\"{}\", x);\n      }\n\n.. bibliography::\n   :id: bib_Bob7x9KmPq2nL\n   :status: draft\n\n   .. list-table::\n      :header-rows: 0\n      :widths: auto\n      :class: bibliography-table\n\n      * - :bibentry:`gui_Bob7x9KmPq2nL:RUST-REF-UNION`\n        - The Rust Reference. \"Unions.\" https://doc.rust-lang.org/reference/items/unions.html\n      * - :bibentry:`gui_Bob7x9KmPq2nL:CERT-C-INT34`\n        - SEI CERT C Coding Standard. \"INT34-C. Do not shift an expression by a negative number of bits.\" https://wiki.sei.cmu.edu/confluence/x/ItcxBQ", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_69zyas59o8ff", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_Bob7x9KmPq2nL", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1464, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_Bob7x9KmPq2nL", "non_compl_ex_Bob7x9KmPq2nL", "compl_ex_Bob7x9KmPq2nL", "bib_Bob7x9KmPq2nL"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "1.0.0-latest", "scope": "module", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["safety", "undefined-behavior"], "template": null, "title": "Example guideline with bibliography", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_FRLaMIMb4t3S": {"arch": {}, "avatar": "", "category": "required", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Description of the guideline goes here.\n\n.. rationale::\n   :id: rat_WJubG7KuUDLW\n   :status: draft\n\n   Explanation of why this guideline is important.\n\n.. non_compliant_example::\n   :id: non_compl_ex_AyFnP0lJLHxi\n   :status: draft\n\n   Explanation of code example.\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     fn example_function() {\n         // Non-compliant implementation\n     }\n     #\n     # fn main() {}\n\n.. compliant_example::\n   :id: compl_ex_pO5gP1aj2v4F\n   :status: draft\n\n   Explanation of code example.\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     fn example_function() {\n         // Compliant implementation\n     }\n     #\n     # fn main() {}", "created_at": "", "decidability": "todo", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_4vjbkm4ceymk", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_FRLaMIMb4t3S", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 282, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_WJubG7KuUDLW", "non_compl_ex_AyFnP0lJLHxi", "compl_ex_pO5gP1aj2v4F"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "todo", "scope": "todo", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["reduce-human-error"], "template": null, "title": "Do not hide unsafe blocks within macro expansions", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_HDnAZ7EZ4z6G": {"arch": {}, "avatar": "", "category": "required", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Code must not rely on Rust's type inference when doing explicit pointer casts via ``var as Type`` or :std:`core::mem::transmute`.\nInstead, explicitly specify the complete target type in the ``as`` expression or :std:`core::mem::transmute` call expression.\n\n.. rationale::\n   :id: rat_h8LdJQ1MNKu9\n   :status: draft\n\n   ``var as Type`` casts and :std:`core::mem::transmute`\\s between raw pointer types are generally valid and unchecked by the compiler as long the target pointer type is a thin pointer.\n   Not specifying the concrete target pointer type allows the compiler to infer it from the surroundings context which may result in the cast accidentally changing due to surrounding type changes resulting in semantically invalid pointer casts.\n\n   Raw pointers have a variety of invariants to manually keep track of.\n   Specifying the concrete types in these scenarios allows the compiler to catch some of these potential issues for the user.\n\n.. non_compliant_example::\n   :id: non_compl_ex_V37Pl103aUW4\n   :status: draft\n\n   The following code leaves it up to type inference to figure out the concrete types of the raw pointer casts, allowing changes to ``with_base``'s function signature to affect the types the function body of ``non_compliant_example`` without incurring a compiler error.\n\n   .. rust-example::\n      :miri:\n\n      #[repr(C)]\n      #[allow(dead_code)]\n      struct Base {\n         position: (u32, u32)\n      }\n\n      #[repr(C)]\n      #[allow(dead_code)]\n      struct Extended {\n         base: Base,\n         scale: f32\n      }\n\n      #[allow(dead_code)]\n      fn non_compliant_example(extended: &Extended) {\n         let extended = extended as *const _;\n         with_base(unsafe { &*(extended as *const _) })\n      }\n\n      fn with_base(_: &Base) {}\n      #\n      # fn main() {}\n\n.. compliant_example::\n   :id: compl_ex_W08ckDrkOhkt\n   :status: draft\n\n   We specify the concrete target types for our pointer casts resulting in a compilation error if the function signature of ``with_base`` is changed.\n\n   .. rust-example::\n      :miri:\n\n      #[repr(C)]\n      #[allow(dead_code)]\n      struct Base {\n         position: (u32, u32)\n      }\n\n      #[repr(C)]\n      #[allow(dead_code)]\n      struct Extended {\n         base: Base,\n         scale: f32\n      }\n\n      #[allow(dead_code)]\n      fn compliant_example(extended: &Extended) {\n         let extended = extended as *const Extended;\n         with_base(unsafe { &*(extended as *const Base) })\n      }\n\n      fn with_base(_: &Base) {}\n      #\n      # fn main() {}", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_1qhsun1vyarz", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_HDnAZ7EZ4z6G", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 268, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_h8LdJQ1MNKu9", "non_compl_ex_V37Pl103aUW4", "compl_ex_W08ckDrkOhkt"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "<TODO>", "scope": "module", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["readability", "reduce-human-error"], "template": null, "title": "Avoid as underscore pointer casts", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_LvmzGKdsAgI5": {"arch": {}, "avatar": "", "category": "mandatory", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Shifting negative positions or a value greater than or equal to the width of the left operand\nin `shift left and shift right expressions <https://rust-lang.github.io/fls/expressions.html#bit-expressions>`_\nare defined by this guideline to be *out-of-range shifts*.\nThe Rust FLS incorrectly describes this behavior as <`arithmetic overflow <https://github.com/rust-lang/fls/issues/632>`_.\n\nIf the types of both operands are integer types,\nthe shift left expression ``lhs << rhs`` evaluates to the value of the left operand ``lhs`` whose bits are\nshifted left by the number of positions specified by the right operand ``rhs``.\nVacated bits are filled with zeros.\nThe expression ``lhs << rhs`` evaluates to :math:`\\mathrm{lhs} \\times 2^{\\mathrm{rhs}}`,\ncast to the type of the left operand.\nIf the value of the right operand is negative or greater than or equal to the width of the left operand,\nthen the operation results in an out-of-range shift.\n\nIf the types of both operands are integer types,\nthe shift right expression ``lhs >> rhs`` evaluates to the value of the left operand ``lhs``\nwhose bits are shifted right by the number of positions specified by the right operand ``rhs``.\nIf the type of the left operand is any signed integer type and is negative,\nthe vacated bits are filled with ones.\nOtherwise, vacated bits are filled with zeros.\nThe expression ``lhs >> rhs`` evaluates to :math:`\\mathrm{lhs} / 2^{\\mathrm{rhs}}`,\ncast to the type of the left operand.\nIf the value of the right operand is negative,\ngreater than or equal to the width of the left operand,\nthen the operation results in an out-of-range shift.\n\nThis rule applies to the following primitive types:\n\n* ``i8``\n* ``i16``\n* ``i32``\n* ``i64``\n* ``i128``\n* ``u8``\n* ``u16``\n* ``u32``\n* ``u64``\n* ``u128``\n* ``usize``\n* ``isize``\n\nAny type can support ``<<`` or ``>>`` if you implement the trait:\n\n.. rust-example::\n\n   use core::ops::Shl;\n   #[allow(dead_code)]\n   struct MyType;\n\n   impl Shl<u32> for MyType {\n       type Output = MyType;\n       fn shl(self, _rhs: u32) -> Self::Output { MyType }\n   }\n   #\n   # fn main() {}\n\nYou may choose any type for the right operand (not just integers), because you control the implementation.\n\nThis rule is a less strict but undecidable version of\n`Do not shift an expression by a negative number of bits or by greater than or equal to the number of bits that exist in the operand`.\nAll code that complies with that rule also complies with this rule.\n\nThis rule is based on The CERT C Coding Standard Rule\n`INT34-C. Do not shift an expression by a negative number of bits or by greater than or equal to the number of bits that exist in the left operand <https://wiki.sei.cmu.edu/confluence/x/ItcxBQ>`_.\n\n.. rationale::\n    :id: rat_tVkDl6gOqz25\n    :status: draft\n\n    Avoid out-of-range shifts in shift left and shift right expressions.\n    Shifting by a negative value, or by a value greater than or equal to the width of the left operand\n    are non-sensical expressions which typically indicate a logic error has occurred.\n\n.. non_compliant_example::\n    :id: non_compl_ex_KLiDMsCesLx7\n    :status: draft\n\n    This noncompliant example shifts by a negative value (-1) and also by greater than or equal to the number of bits that exist in the left operand (40):.\n\n    .. rust-example::\n\n        fn main() {\n            let bits : u32 = 61;\n            let shifts = vec![-1, 4, 40];\n\n            for sh in shifts {\n                println!(\"{bits} << {sh} = {:?}\", bits << sh);\n            }\n        }\n\n.. compliant_example::\n    :id: compl_ex_Ux1WqHbGKV73\n    :status: draft\n\n    This compliant example test the value of ``sh`` to ensure the value of the right operand is negative or greater\n    than or equal to the width of the left operand.\n\n    .. rust-example::\n\n        fn main() {\n            let bits: u32 = 61;\n            let shifts = vec![-1, 0, 4, 40];\n\n            for sh in shifts {\n                if sh >= 0 && sh < 32 {\n                    println!(\"{bits} << {sh} = {}\", bits << sh);\n                }\n             }\n        }\n\n.. compliant_example::\n    :id: compl_ex_Ux1WqHbGKV74\n    :status: draft\n\n    The call to ``bits.overflowing_shl(sh)`` in this noncompliant shifts ``bits`` left by ``sh`` bits.\n    Returns a tuple of the shifted version of self along with a boolean indicating whether the shift value was larger than or equal to the number of bits.\n    If the shift value is too large, then value is masked (N-1) where N is the number of bits, and this value is used to perform the shift.\n\n      .. rust-example::\n\n         fn safe_shl(bits: u32, shift: u32) -> u32 {\n             let (result, overflowed) = bits.overflowing_shl(shift);\n             if overflowed {\n                 0\n             } else {\n                 result\n             }\n         }\n\n         fn main() {\n             let bits: u32 = 61;\n             let shifts = vec![4, 40];\n\n             for sh in shifts {\n                 let result = safe_shl(bits, sh);\n                 println!(\"{bits} << {sh} = {result}\");\n             }\n         }", "created_at": "", "decidability": "undecidable", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_sru4wi5jomoe", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_LvmzGKdsAgI5", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 364, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_tVkDl6gOqz25", "non_compl_ex_KLiDMsCesLx7", "compl_ex_Ux1WqHbGKV73", "compl_ex_Ux1WqHbGKV74"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "1.0.0-latest", "scope": "module", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["numerics", "surprising-behavior", "defect"], "template": null, "title": "Avoid out-or-range shifts", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_PM8Vpf7lZ51U": {"arch": {}, "avatar": "", "category": "<TODO>", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "The ``as`` operator shall not be used with an expression of numeric type as the left operand,\nand any pointer type as the right operand.\n\n:std:`std::mem::transmute` shall not be used with any numeric type (including floating point types)\nas the argument to the ``Src`` parameter, and any pointer type as the argument to the ``Dst`` parameter.\n\n.. rationale::\n   :id: rat_YqhEiWTj9z6L\n   :status: draft\n\n   A pointer created from an arbitrary arithmetic expression may designate an invalid address,\n   including an address that does not point to a valid object, an address that points to an\n   object of the wrong type, or an address that is not properly aligned. Use of such a pointer\n   to access memory will result in undefined behavior.\n\n   The ``as`` operator also does not check that the size of the source operand is the same as\n   the size of a pointer, which may lead to unexpected results if the address computation was\n   originally performed in a differently-sized address space.\n\n   While ``as`` can notionally be used to create a null pointer, the functions\n   :std:`core::ptr::null` and :std:`core::ptr::null_mut` are the more idiomatic way to do this.\n\n.. non_compliant_example::\n   :id: non_compl_ex_0ydPk7VENSrA\n   :status: draft\n\n   Any use of ``as`` or ``transmute`` to create a pointer from an arithmetic address value\n   is non-compliant:\n\n   .. rust-example::\n     :miri:\n\n     #[allow(dead_code)]\n     fn f1(x: u16, y: i32, z: u64, w: usize) {\n       let _p1 = x as * const u32;  // not compliant\n       let _p2 = y as * const u32;  // not compliant\n       let _p3 = z as * const u32;  // not compliant\n       let _p4 = w as * const u32;  // not compliant despite being the right size\n\n       let _f: f64 = 10.0;\n       // let p5 = f as * const u32;  // not valid\n\n       unsafe {\n         // let p5: * const u32 = std::mem::transmute(x);  // not valid\n         // let p6: * const u32 = std::mem::transmute(y);  // not valid\n\n         #[allow(integer_to_ptr_transmutes)]\n         let _p7: * const u32 = std::mem::transmute(z); // not compliant\n         #[allow(integer_to_ptr_transmutes)]\n         let _p8: * const u32 = std::mem::transmute(w); // not compliant\n\n         let _p9: * const u32 = std::mem::transmute(_f); // not compliant, and very strange\n       }\n     }\n     #\n     # fn main() {}\n\n.. compliant_example::\n   :id: compl_ex_oneKuF52yzrx\n   :status: draft\n\n   There is no compliant example of this operation.", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_59mpteeczzo", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_PM8Vpf7lZ51U", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 522, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_YqhEiWTj9z6L", "non_compl_ex_0ydPk7VENSrA", "compl_ex_oneKuF52yzrx"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "<TODO>", "scope": "module", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["subset", "undefined-behavior"], "template": null, "title": "An integer shall not be converted to a pointer", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_RHvQj8BHlz9b": {"arch": {}, "avatar": "", "category": "advisory", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Shifting negative positions or a value greater than or equal to the width of the left operand\nin `shift left and shift right expressions <https://rust-lang.github.io/fls/expressions.html#bit-expressions>`_\nare defined by this guideline to be *out-of-range shifts*.\nThe Rust FLS incorrectly describes this behavior as <`arithmetic overflow <https://github.com/rust-lang/fls/issues/632>`__.\n\nIf the types of both operands are integer types,\nthe shift left expression ``lhs << rhs`` evaluates to the value of the left operand ``lhs`` whose bits are\nshifted left by the number of positions specified by the right operand ``rhs``.\nVacated bits are filled with zeros.\nThe expression ``lhs << rhs`` evaluates to :math:`\\mathrm{lhs} \\times 2^{\\mathrm{rhs}}`,\ncast to the type of the left operand.\nIf the value of the right operand is negative or greater than or equal to the width of the left operand,\nthen the operation results in an out-of-range shift.\n\nIf the types of both operands are integer types,\nthe shift right expression ``lhs >> rhs`` evaluates to the value of the left operand ``lhs``\nwhose bits are shifted right by the number of positions specified by the right operand ``rhs``.\nIf the type of the left operand is any signed integer type and is negative,\nthe vacated bits are filled with ones.\nOtherwise, vacated bits are filled with zeros.\nThe expression ``lhs >> rhs`` evaluates to :math:`\\mathrm{lhs} / 2^{\\mathrm{rhs}}`,\ncast to the type of the left operand.\nIf the value of the right operand is negative,\ngreater than or equal to the width of the left operand,\nthen the operation results in an out-of-range shift.\n\nThis rule applies to the following primitive types:\n\n* ``i8``\n* ``i16``\n* ``i32``\n* ``i64``\n* ``i128``\n* ``u8``\n* ``u16``\n* ``u32``\n* ``u64``\n* ``u128``\n* ``usize``\n* ``isize``\n\nAny type can support ``<<`` or ``>>`` if you implement the trait:\n\n.. rust-example::\n\n   use core::ops::Shl;\n   #[allow(dead_code)]\n   struct MyType;\n\n   impl Shl<u32> for MyType {\n       type Output = MyType;\n       fn shl(self, _rhs: u32) -> Self::Output { MyType }\n   }\n   #\n   # fn main() {}\n\nYou may choose any type for the right operand (not just integers), because you control the implementation.\n\nThis rule is based on The CERT C Coding Standard Rule\n`INT34-C. Do not shift an expression by a negative number of bits or by greater than or equal to the number of bits that exist in the left operand <https://wiki.sei.cmu.edu/confluence/x/ItcxBQ>`_.\n\n.. rationale::\n    :id: rat_3MpR8QfHodGT\n    :status: draft\n\n    Avoid out-of-range shifts in shift left and shift right expressions.\n    Shifting by a negative value, or by a value greater than or equal to the width of the left operand\n    are non-sensical expressions which typically indicate a logic error has occurred.\n\n.. non_compliant_example::\n    :id: non_compl_ex_O9FZuazu3Lcn\n    :status: draft\n\n    This noncompliant example shifts by a negative value (-1) and also by greater than or equal to the number of bits that exist in the left operand (40):.\n\n    .. rust-example::\n\n        fn main() {\n            let bits : u32 = 61;\n            let shifts = vec![-1, 4, 40];\n\n            for sh in shifts {\n                println!(\"{bits} << {sh} = {:?}\", bits << sh);\n            }\n        }\n\n.. non_compliant_example::\n    :id: non_compl_ex_mvkgTL3kulZ5\n    :status: draft\n\n    This noncompliant example test the value of ``sh`` to ensure the value of the right operand is negative or greater\n    than or equal to the width of the left operand.\n\n    .. rust-example::\n\n        fn main() {\n            let bits: u32 = 61;\n            let shifts = vec![-1, 0, 4, 40];\n\n            for sh in shifts {\n                if sh >= 0 && sh < 32 {\n                    println!(\"{bits} << {sh} = {}\", bits << sh);\n                }\n             }\n        }\n\n.. non_compliant_example::\n    :id: non_compl_ex_O9FZuazu3Lcm\n    :status: draft\n\n    The call to ``bits.wrapping_shl(sh)`` in this noncompliant example yields ``bits << mask(sh)``,\n    where ``mask`` removes any high-order bits of ``sh`` that would cause the shift to exceed  the bitwidth of ``bits``.\n    Note that this is not the same as a rotate-left.\n    The ``wrapping_shl`` has the same behavior as the ``<<`` operator in release mode.\n\n      .. rust-example::\n\n         fn main() {\n             let bits : u32 = 61;\n             let shifts = vec![4, 40];\n\n             for sh in shifts {\n                 println!(\"{bits} << {sh} = {:?}\", bits.wrapping_shl(sh));\n             }\n         }\n\n.. non_compliant_example::\n    :id: non_compl_ex_O9FZuazu3Lcx\n    :status: draft\n\n    This noncompliant example uses ``bits.unbounded_shr(sh)``.\n    If ``sh`` is larger or equal to the width of ``bits``,\n    the entire value is shifted out,\n    which yields 0 for a positive number,\n    and -1 for a negative number.\n    The use of this function is noncompliant because it does not detect out-of-range shifts.\n\n      .. rust-example::\n         :version: 1.87\n\n         fn main() {\n             let bits : u32 = 61;\n             let shifts = vec![4, 40];\n\n             for sh in shifts {\n                 println!(\"{bits} << {sh} = {:?}\", bits.unbounded_shr(sh));\n             }\n         }\n\n.. non_compliant_example::\n    :id: non_compl_ex_O9FZuazu3Lcp\n    :status: draft\n\n    The call to ``bits.overflowing_shl(sh)`` in this noncompliant shifts ``bits`` left by ``sh`` bits.\n    Returns a tuple of the shifted version of self along with a boolean indicating whether the shift value was larger than or equal to the number of bits.\n    If the shift value is too large, then value is masked (N-1) where N is the number of bits, and this value is used to perform the shift.\n\n      .. rust-example::\n\n         fn main() {\n             let bits: u32 = 61;\n             let shifts = vec![4, 40];\n\n             for sh in shifts {\n                 let (result, overflowed) = bits.overflowing_shl(sh);\n                 if overflowed {\n                     println!(\"{bits} << {sh} shift too large\");\n                 } else {\n                     println!(\"{bits} << {sh} = {result}\");\n                 }\n             }\n         }\n\n.. compliant_example::\n    :id: compl_ex_xpPQqYeEPGIo\n    :status: draft\n\n    This compliant example performs left shifts via the `checked_shl <https://doc.rust-lang.org/core/index.html?search=%22checked_shl%22>`_\n    function and right shifts via the `checked_shr <https://doc.rust-lang.org/core/index.html?search=%22checked_shr%22>`_ function.\n    Both of these functions are defined in `core <https://doc.rust-lang.org/core/index.html>`_.\n\n      ``<T>::checked_shl(M)`` returns a value of type ``Option<T>``:\n\n      * If ``M < 0``\\ , the output is ``None``\n      * If ``0 <= M < N`` for ``T`` of size ``N`` bits, then the output is ``Some(T)``\n      * If ``N <= M``\\ , the output is ``None``\n\n      Checked shift operations make programmer intent explicit and eliminates out-of-range shifts.\n      Shifting by:\n\n      * negative values is impossible because ``checked_shl`` only accepts unsigned integers as shift lengths, and\n      * greater than or equal to the number of bits that exist in the left operand returns a ``None`` value.\n\n      .. rust-example::\n\n         fn main() {\n             let bits : u32 = 61;\n             // let shifts = vec![-1, 4, 40];\n             //                    ^--- Compiler rejects negative shifts\n             let shifts = vec![4, 40];\n\n             for sh in shifts {\n                 println!(\"{bits} << {sh} = {:?}\", bits.checked_shl(sh));\n             }\n         }", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_sru4wi5jomoe", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_RHvQj8BHlz9b", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 604, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_3MpR8QfHodGT", "non_compl_ex_O9FZuazu3Lcn", "non_compl_ex_mvkgTL3kulZ5", "non_compl_ex_O9FZuazu3Lcm", "non_compl_ex_O9FZuazu3Lcx", "non_compl_ex_O9FZuazu3Lcp", "compl_ex_xpPQqYeEPGIo"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "1.7.0-latest", "scope": "module", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["numerics", "reduce-human-error", "maintainability", "surprising-behavior", "subset"], "template": null, "title": "Do not shift an expression by a negative number of bits or by greater than or equal to the bitwidth of the operand", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_SJMrWDYZ0dN4": {"arch": {}, "avatar": "", "category": "required", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Each name inside of the definition of a macro shall either use a global path or path prefixed with $crate.\n\n.. rationale::\n   :id: rat_VRNXaxmW1l2s\n   :status: draft\n\n   Using a path that refers to an entity relatively inside of a macro subjects it to path resolution\n   results which may change depending on where the macro is used. The intended path to refer to an entity\n   can be shadowed when using a macro leading to unexpected behaviors. This could lead to developer confusion\n   about why a macro behaves differently in diffenent locations, or confusion about where entity in a macro\n   will resolve to.\n\n.. non_compliant_example::\n   :id: non_compl_ex_m2XR1ihTbCQS\n   :status: draft\n\n   The following is a macro which shows referring to a vector entity using a non-global path. Depending on\n   where the macro is used a different `Vec` could be used than is intended. If scope where this is used\n   defines a struct `Vec` which is not preset at the macro definition, the macro user might be intending to\n   use that in the macro.\n\n   .. rust-example::\n\n     #[macro_export]\n     macro_rules! my_vec {\n         ( $( $x:expr ),* ) => {\n             {\n                 let mut temp_vec = Vec::new(); // non-global path\n                 $(\n                     temp_vec.push($x);\n                 )*\n                 temp_vec\n             }\n         };\n     }\n\n     fn main() {\n         let _ = my_vec![1, 2, 3];\n     }\n\n.. compliant_example::\n   :id: compl_ex_xyaShvxL9JAM\n   :status: draft\n\n   The following is a macro refers to Vec using a global path. Even if there is a different struct called\n   `Vec` defined in the scope of the macro usage, this macro will unambiguously use the `Vec` from the\n   Standard Library.\n\n   .. rust-example::\n\n     #[macro_export]\n     macro_rules! my_vec_global {\n         ( $( $x:expr ),* ) => {\n             {\n                 let mut temp_vec = ::std::vec::Vec::new(); // global path\n                 $(\n                     temp_vec.push($x);\n                 )*\n                 temp_vec\n             }\n         };\n     }\n\n     fn main() {\n         let _ = my_vec_global![1, 2, 3];\n     }", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_7kb6ltajgiou", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_SJMrWDYZ0dN4", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 339, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_VRNXaxmW1l2s", "non_compl_ex_m2XR1ihTbCQS", "compl_ex_xyaShvxL9JAM"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "1.85.0;1.85.1", "scope": "module", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["reduce-human-error"], "template": null, "title": "Names in a macro definition shall use a fully qualified path", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_WJlWqgIxmE8P": {"arch": {}, "avatar": "", "category": "mandatory", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Description of the guideline goes here.\n\n.. rationale::\n   :id: rat_C8RRidiVzhRj\n   :status: draft\n\n   Explanation of why this guideline is important.\n\n.. non_compliant_example::\n   :id: non_compl_ex_TjRiRkmBY6wG\n   :status: draft\n\n   Explanation of code example.\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     fn example_function() {\n         // Non-compliant implementation\n     }\n     #\n     # fn main() {}\n\n.. compliant_example::\n   :id: compl_ex_AEKEOYhBWPMl\n   :status: draft\n\n   Explanation of code example.\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     fn example_function() {\n         // Compliant implementation\n     }\n     #\n     # fn main() {}", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_utd3zqczix", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_WJlWqgIxmE8P", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 425, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_C8RRidiVzhRj", "non_compl_ex_TjRiRkmBY6wG", "compl_ex_AEKEOYhBWPMl"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "todo", "scope": "system", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["reduce-human-error"], "template": null, "title": "Shall not use Function-like Macros", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_a1mHfjgKk4Xr": {"arch": {}, "avatar": "", "category": "mandatory", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Description of the guideline goes here.\n\n.. rationale::\n   :id: rat_62mSorNF05kD\n   :status: draft\n\n   Explanation of why this guideline is important.\n\n.. non_compliant_example::\n   :id: non_compl_ex_hP5KLhqQfDcd\n   :status: draft\n\n   Explanation of code example.\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     fn example_function() {\n         // Non-compliant implementation\n     }\n     #\n     # fn main() {}\n\n.. compliant_example::\n   :id: compl_ex_ti7GWHCOhUvT\n   :status: draft\n\n   Explanation of code example.\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     fn example_function() {\n         // Compliant implementation\n     }\n     #\n     # fn main() {}", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_vnvt40pa48n8", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_a1mHfjgKk4Xr", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 482, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_62mSorNF05kD", "non_compl_ex_hP5KLhqQfDcd", "compl_ex_ti7GWHCOhUvT"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "todo", "scope": "system", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["reduce-human-error"], "template": null, "title": "Shall not invoke macros", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_dCquvqE1csI3": {"arch": {}, "avatar": "", "category": "required", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Eliminate `arithmetic overflow <https://rust-lang.github.io/fls/expressions.html#arithmetic-overflow>`__ of both signed and unsigned integer types.\nAny wraparound behavior must be explicitly specified to ensure the same behavior in both debug and release modes.\n\nThis rule applies to the following primitive types:\n\n* ``i8``\n* ``i16``\n* ``i32``\n* ``i64``\n* ``i128``\n* ``u8``\n* ``u16``\n* ``u32``\n* ``u64``\n* ``u128``\n* ``usize``\n* ``isize``\n\n.. rationale::\n    :id: rat_LvrS1jTCXEOk\n    :status: draft\n\n    Eliminate arithmetic overflow to avoid runtime panics and unexpected wraparound behavior.\n    Arithmetic overflow will panic in debug mode, but wraparound in release mode, resulting in inconsistent behavior.\n    Use explicit `wrapping <https://doc.rust-lang.org/std/num/struct.Wrapping.html>`_ or\n    `saturating <https://doc.rust-lang.org/std/num/struct.Saturating.html>`_ semantics where these behaviors are intentional.\n    Range checking can be used to eliminate the possibility of arithmetic overflow.\n\n.. non_compliant_example::\n    :id: non_compl_ex_cCh2RQUXeH0N\n    :status: draft\n\n    This noncompliant code example can result in arithmetic overflow during the addition of the signed operands ``si_a`` and ``si_b``:\n\n    .. rust-example::\n\n        #[allow(dead_code)]\n        fn add(si_a: i32, si_b: i32) {\n          let _sum: i32 = si_a + si_b;\n          // ...\n        }\n        #\n        # fn main() {}\n\n.. compliant_example::\n    :id: compl_ex_BgUHiRB4kc4b_1\n    :status: draft\n\n    This compliant solution ensures that the addition operation cannot result in arithmetic overflow,\n    based on the maximum range of a signed 32-bit integer.\n    Functions such as\n    `overflowing_add <https://doc.rust-lang.org/stable/core/primitive.u32.html#method.overflowing_add>`_,\n    `overflowing_sub <https://doc.rust-lang.org/stable/core/primitive.u32.html#method.overflowing_sub>`_, and\n    `overflowing_mul <https://doc.rust-lang.org/stable/core/primitive.u32.html#method.overflowing_mul>`_\n    can also be used to detect overflow.\n    Code that invoked these functions would typically further restrict the range of possible values,\n    based on the anticipated range of the inputs.\n\n    .. rust-example::\n\n        # #[derive(Debug)]\n        #[allow(dead_code)]\n        enum ArithmeticError { Overflow, DivisionByZero }\n        use std::i32::{MAX as INT_MAX, MIN as INT_MIN};\n\n        #[allow(dead_code)]\n        fn add(si_a: i32, si_b: i32) -> Result<i32, ArithmeticError> {\n            if (si_b > 0 && si_a > INT_MAX - si_b)\n                || (si_b < 0 && si_a < INT_MIN - si_b)\n            {\n                Err(ArithmeticError::Overflow)\n            } else {\n                Ok(si_a + si_b)\n            }\n        }\n\n        #[allow(dead_code)]\n        fn sub(si_a: i32, si_b: i32) -> Result<i32, ArithmeticError> {\n            if (si_b < 0 && si_a > INT_MAX + si_b)\n                || (si_b > 0 && si_a < INT_MIN + si_b)\n            {\n                Err(ArithmeticError::Overflow)\n            } else {\n                Ok(si_a - si_b)\n            }\n        }\n\n        #[allow(dead_code)]\n        fn mul(si_a: i32, si_b: i32) -> Result<i32, ArithmeticError> {\n            if si_a == 0 || si_b == 0 {\n                return Ok(0);\n            }\n\n            // Detect overflow before performing multiplication\n            if (si_a == -1 && si_b == INT_MIN) || (si_b == -1 && si_a == INT_MIN) {\n                Err(ArithmeticError::Overflow)\n            } else if (si_a > 0 && (si_b > INT_MAX / si_a || si_b < INT_MIN / si_a))\n                || (si_a < 0 && (si_b > INT_MIN / si_a || si_b < INT_MAX / si_a))\n            {\n                Err(ArithmeticError::Overflow)\n            } else {\n                Ok(si_a * si_b)\n            }\n        }\n        #\n        # fn main() {}\n\n.. compliant_example::\n    :id: compl_ex_BgUHiRB4kc4c\n    :status: draft\n\n    This compliant example uses safe checked addition instead of manual bounds checks.\n    Checked functions can reduce readability when complex arithmetic expressions are needed.\n\n    .. rust-example::\n\n        # #[derive(Debug)]\n        #[allow(dead_code)]\n        enum ArithmeticError { Overflow, DivisionByZero }\n\n        #[allow(dead_code)]\n        fn add(si_a: i32, si_b: i32) -> Result<i32, ArithmeticError> {\n            si_a.checked_add(si_b).ok_or(ArithmeticError::Overflow)\n        }\n\n        #[allow(dead_code)]\n        fn sub(a: i32, b: i32) -> Result<i32, ArithmeticError> {\n            a.checked_sub(b).ok_or(ArithmeticError::Overflow)\n        }\n\n        #[allow(dead_code)]\n        fn mul(a: i32, b: i32) -> Result<i32, ArithmeticError> {\n            a.checked_mul(b).ok_or(ArithmeticError::Overflow)\n        }\n        #\n        # fn main() {}\n\n.. compliant_example::\n    :id: compl_ex_BgUHiRB4kc4b\n    :status: draft\n\n    Wrapping behavior must be explicitly requested. This compliant example uses wrapping functions.\n\n    .. rust-example::\n\n        #[allow(dead_code)]\n        fn add(a: i32, b: i32) -> i32 {\n            a.wrapping_add(b)\n        }\n\n        #[allow(dead_code)]\n        fn sub(a: i32, b: i32) -> i32 {\n            a.wrapping_sub(b)\n        }\n\n        #[allow(dead_code)]\n        fn mul(a: i32, b: i32) -> i32 {\n            a.wrapping_mul(b)\n        }\n        #\n        # fn main() {}\n\n.. compliant_example::\n    :id: compl_ex_BhUHiRB4kc4b\n    :status: draft\n\n    Wrapping behavior call also be achieved using the ``Wrapping<T>`` type as in this compliant solution.\n    The ``Wrapping<T>`` type is a ``struct`` found in the ``std::num`` module that explicitly enables two's complement\n    wrapping arithmetic for the inner type ``T`` (which must be an integer or ``usize/isize``).\n    The ``Wrapping<T>`` type provides a consistent way to force wrapping behavior in all build modes,\n    which is useful in specific scenarios like implementing cryptography or hash functions where wrapping arithmetic is the intended behavior.\n\n    .. rust-example::\n\n        use std::num::Wrapping;\n\n        fn add(si_a: Wrapping<i32>, si_b: Wrapping<i32>) -> Wrapping<i32> {\n            si_a + si_b\n        }\n\n        #[allow(dead_code)]\n        fn sub(si_a: Wrapping<i32>, si_b: Wrapping<i32>) -> Wrapping<i32> {\n            si_a - si_b\n        }\n\n        #[allow(dead_code)]\n        fn mul(si_a: Wrapping<i32>, si_b: Wrapping<i32>) -> Wrapping<i32> {\n            si_a * si_b\n        }\n\n        fn main() {\n            let si_a = Wrapping(i32::MAX);\n            let si_b = Wrapping(i32::MAX);\n            println!(\"{} + {} = {}\", si_a, si_b, add(si_a, si_b))\n        }\n\n.. compliant_example::\n    :id: compl_ex_BgUHiSB4kc4b\n    :status: draft\n\n    Saturation semantics means that instead of wrapping around or resulting in an error,\n    any result that falls outside the valid range of the integer type is clamped:\n\n    - To the maximum value, if the result were to be greater than the maximum value, or\n    - To the minimum value, if the result were to be smaller than the minimum,\n\n    Saturation semantics always conform to this rule because they ensure that integer operations do not result in arithmetic overflow.\n    This compliant solution shows how to use saturating functions to provide saturation semantics for some basic arithmetic operations.\n\n    .. rust-example::\n\n        #[allow(dead_code)]\n        fn add(a: i32, b: i32) -> i32 {\n            a.saturating_add(b)\n        }\n\n        #[allow(dead_code)]\n        fn sub(a: i32, b: i32) -> i32 {\n            a.saturating_sub(b)\n        }\n\n        #[allow(dead_code)]\n        fn mul(a: i32, b: i32) -> i32 {\n            a.saturating_mul(b)\n        }\n        #\n        # fn main() {}\n\n.. compliant_example::\n    :id: compl_ex_BgUHiSB4kd4b\n    :status: draft\n\n    ``Saturating<T>`` is a wrapper type in Rust's ``core`` library (``core::num::Saturating<T>``) that makes arithmetic operations on the wrapped value perform saturating arithmetic instead of wrapping, panicking, or overflowing.\n    ``Saturating<T>`` is useful when you have a section of code or a data type where all arithmetic must be saturating.\n    This compliant solution uses the ``Saturating<T>`` type to define several functions that perform basic integer operations using saturation semantics.\n\n    .. rust-example::\n\n        use std::num::Saturating;\n\n        fn add(si_a: Saturating<i32>, si_b: Saturating<i32>) -> Saturating<i32> {\n            si_a + si_b\n        }\n\n        #[allow(dead_code)]\n        fn sub(si_a: Saturating<i32>, si_b: Saturating<i32>) -> Saturating<i32> {\n            si_a - si_b\n        }\n\n        #[allow(dead_code)]\n        fn mul(si_a: Saturating<i32>, si_b: Saturating<i32>) -> Saturating<i32> {\n            si_a * si_b\n        }\n\n        fn main() {\n            let si_a = Saturating(i32::MAX);\n            let si_b = Saturating(i32::MAX);\n            println!(\"{} + {} = {}\", si_a, si_b, add(si_a, si_b))\n        }\n\n.. non_compliant_example::\n    :id: non_compl_ex_cCh2RQUXeH0O\n    :status: draft\n\n    This noncompliant code example example prevents divide-by-zero errors, but does not prevent arithmetic overflow.\n\n    .. rust-example::\n\n        # #[derive(Debug)]\n        #[allow(dead_code)]\n        enum DivError { DivisionByZero, Overflow }\n\n        #[allow(dead_code)]\n        fn div(s_a: i64, s_b: i64) -> Result<i64, DivError> {\n            if s_b == 0 {\n                Err(DivError::DivisionByZero)\n            } else {\n                Ok(s_a / s_b)\n            }\n        }\n        #\n        # fn main() {}\n\n.. compliant_example::\n    :id: compl_ex_BgUHiRB4kc4d\n    :status: draft\n\n    This compliant solution eliminates the possibility of both divide-by-zero errors and arithmetic overflow:\n\n    .. rust-example::\n\n        # #[derive(Debug)]\n        #[allow(dead_code)]\n        enum DivError { DivisionByZero, Overflow }\n\n        #[allow(dead_code)]\n        fn div(s_a: i64, s_b: i64) -> Result<i64, DivError> {\n            if s_b == 0 {\n                Err(DivError::DivisionByZero)\n            } else if s_a == i64::MIN && s_b == -1 {\n                Err(DivError::Overflow)\n            } else {\n                Ok(s_a / s_b)\n            }\n        }\n        #\n        # fn main() {}", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_oFIRXBPXu6Zv", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_dCquvqE1csI3", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 829, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_LvrS1jTCXEOk", "non_compl_ex_cCh2RQUXeH0N", "compl_ex_BgUHiRB4kc4b_1", "compl_ex_BgUHiRB4kc4c", "compl_ex_BgUHiRB4kc4b", "compl_ex_BhUHiRB4kc4b", "compl_ex_BgUHiSB4kc4b", "compl_ex_BgUHiSB4kd4b", "non_compl_ex_cCh2RQUXeH0O", "compl_ex_BgUHiRB4kc4d"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "1.0 - latest", "scope": "system", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["security", "performance", "numerics"], "template": null, "title": "Ensure that integer operations do not result in arithmetic overflow", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_h0uG1C9ZjryA": {"arch": {}, "avatar": "", "category": "mandatory", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Description of the guideline goes here.\n\n.. rationale::\n   :id: rat_U3AEUPyaUhcb\n   :status: draft\n\n   Explanation of why this guideline is important.\n\n.. non_compliant_example::\n   :id: non_compl_ex_Gb4zimei8cNI\n   :status: draft\n\n   Explanation of code example.\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     fn example_function() {\n         // Non-compliant implementation\n     }\n     #\n     # fn main() {}\n\n.. compliant_example::\n   :id: compl_ex_Pw7YCh4Iv47Z\n   :status: draft\n\n   Explanation of code example\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     fn example_function() {\n         // Compliant implementation\n     }\n     #\n     # fn main() {}", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_xa7lp0zg1ol2", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_h0uG1C9ZjryA", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 539, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_U3AEUPyaUhcb", "non_compl_ex_Gb4zimei8cNI", "compl_ex_Pw7YCh4Iv47Z"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "todo", "scope": "system", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["reduce-human-error"], "template": null, "title": "Shall not use Declarative Macros", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_iv9yCMHRgpE0": {"arch": {}, "avatar": "", "category": "<TODO>", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "An expression of numeric type shall not be converted to a pointer if the resulting pointer\nis incorrectly aligned, does not point to an entity of the referenced type, or is an invalid representation.\n\n.. rationale::\n   :id: rat_OhxKm751axKw\n   :status: draft\n\n   The mapping between pointers and integers must be consistent with the addressing structure of the\n   execution environment. Issues may arise, for example, on architectures that have a segmented memory model.\n\n.. non_compliant_example::\n   :id: non_compl_ex_CkytKjRQezfQ\n   :status: draft\n\n   This example makes assumptions about the layout of the address space that do not hold on all platforms.\n   The manipulated address may have discarded part of the original address space, and the flag may\n   silently interfere with the address value. On platforms where pointers are 64-bits this may have\n   particularly unexpected results.\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     fn f1(flag: u32, ptr: * const u32) {\n       /* ... */\n       let mut rep = ptr as usize;\n       rep = (rep & 0x7fffff) | ((flag as usize) << 23);\n       let _p2 = rep as * const u32;\n     }\n     #\n     # fn main() {}\n\n.. compliant_example::\n   :id: compl_ex_oBoluiKSvREu\n   :status: draft\n\n   This compliant solution uses a struct to provide storage for both the pointer and the flag value.\n   This solution is portable to machines of different word sizes, both smaller and larger than 32 bits,\n   working even when pointers cannot be represented in any integer type.\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     struct PtrFlag {\n       pointer: * const u32,\n       flag: u32\n     }\n\n     #[allow(dead_code)]\n     fn f2(flag: u32, ptr: * const u32) {\n       let _ptrflag = PtrFlag {\n         pointer: ptr,\n         flag: flag\n       };\n       /* ... */\n     }\n     #\n     # fn main() {}", "created_at": "", "decidability": "undecidable", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_9wgldua1u8yt", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_iv9yCMHRgpE0", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1156, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_OhxKm751axKw", "non_compl_ex_CkytKjRQezfQ", "compl_ex_oBoluiKSvREu"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "<TODO>", "scope": "system", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["defect", "undefined-behavior"], "template": null, "title": "An integer shall not be converted to an invalid pointer", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_kMbiWbn8Z6g5": {"arch": {}, "avatar": "", "category": "required", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Integer division by zero results in a panic.\nThis includes both `division expressions\n<https://rust-lang.github.io/fls/expressions.html#syntax_divisionexpression>`_ and `remainder expressions\n<https://rust-lang.github.io/fls/expressions.html#syntax_remainderexpression>`_.\n\nDivision and remainder expressions on signed integers are also susceptible to arithmetic overflow.\nOverflow is covered in full by the guideline `Ensure that integer operations do not result in arithmetic overflow`.\n\nThis rule applies to the following primitive integer types:\n\n * ``i8``\n * ``i16``\n * ``i32``\n * ``i64``\n * ``i128``\n * ``u8``\n * ``u16``\n * ``u32``\n * ``u64``\n * ``u128``\n * ``usize``\n * ``isize``\n\nThis rule does not apply to evaluation of the :std:`core::ops::Div` trait on types other than `integer\ntypes <https://rust-lang.github.io/fls/types-and-traits.html#integer-types>`_.\n\nThis rule is a less strict version of `Do not use an integer type as a divisor during integer division`.\nAll code that complies with that rule also complies with this rule.\n\n.. rationale::\n   :id: rat_h84NjY2tLSBW\n   :status: draft\n\n   Integer division by zero results in a panic; an abnormal program state that may terminate the process and must be avoided.\n\n.. non_compliant_example::\n   :id: non_compl_ex_LLs3vY8aGz0F\n   :status: draft\n\n   This non-compliant example panics when the right operand is zero for either the division or remainder operations.\n\n   .. rust-example::\n       :compile_fail:\n\n       fn main() {\n           let x = 0;\n           let _y = 5 / x; // Results in a panic.\n           let _z = 5 % x; // Also results in a panic.\n       }\n\n.. compliant_example::\n   :id: compl_ex_Ri9pP5Ch3kcc\n   :status: draft\n\n   Compliant examples from `Do not use an integer type as a divisor during integer division` are also valid for this rule.\n   Additionally, the check for zero can be performed manually, as in this compliant example.\n   However, as the complexity of the control flow leading to the invariant increases,\n   it becomes increasingly harder for both programmers and static analysis tools to reason about it.\n\n   Note that the test for arithmetic overflow is not necessary for unsigned integers.\n\n   .. rust-example::\n\n      fn main() {\n          // Checking for zero by hand\n          let x = 0u32;\n          let _y = if x != 0u32 {\n              5u32 / x\n          } else {\n              0u32\n          };\n\n          let _z = if x != 0u32 {\n              5u32 % x\n          } else {\n              0u32\n          };\n      }", "created_at": "", "decidability": "undecidable", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_Q9dhNiICGIfr", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_kMbiWbn8Z6g5", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1233, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_h84NjY2tLSBW", "non_compl_ex_LLs3vY8aGz0F", "compl_ex_Ri9pP5Ch3kcc"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "latest", "scope": "system", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["numerics", "defect"], "template": null, "title": "Do not divide by 0", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_ot2Zt3dd6of1": {"arch": {}, "avatar": "", "category": "required", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Any function shall not call itself directly or indirectly\n\n.. rationale::\n    :id: rat_gvoKeVSKK8fD\n    :status: draft\n\n    Recursive functions can easily cause stack overflows, which may result in exceptions or, in some cases, undefined behavior (typically some embedded systems). Although the Rust compiler supports `tail call optimization <https://en.wikipedia.org/wiki/Tail_call>`_\\ , this optimization is not guaranteed and depends on the specific implementation and function structure. There is an `open RFC to guarantee tail call optimization in the Rust compiler <https://github.com/phi-go/rfcs/blob/guaranteed-tco/text/0000-explicit-tail-calls.md>`_\\ , but this feature has not yet been stabilized. Until tail call optimization is guaranteed and stabilized, developers should avoid using recursive functions to prevent potential stack overflows and ensure program reliability.\n\n.. non_compliant_example::\n    :id: non_compl_ex_MxqhjfkStJJy\n    :status: draft\n\n    The below function ``concat_strings`` is not complaint because it call itself and depending on depth of data provided as input it could generate an stack overflow exception or undefine behavior.\n\n    .. rust-example::\n\n        // Recursive enum to represent a string or a list of `MyEnum`\n        #[allow(dead_code)]\n        enum MyEnum {\n            Str(String),\n            List(Vec<MyEnum>),\n        }\n\n        // Concatenates strings from a nested structure of `MyEnum` using recursion.\n        #[allow(dead_code)]\n        fn concat_strings(input: &[MyEnum]) -> String {\n            let mut result = String::new();\n            for item in input {\n                match item {\n                    MyEnum::Str(s) => result.push_str(s),\n                    MyEnum::List(list) => result.push_str(&concat_strings(list)),\n                }\n            }\n            result\n        }\n        #\n        # fn main() {}\n\n.. compliant_example::\n    :id: compl_ex_9pK3h65rfceO\n    :status: draft\n\n    The following code implements the same functionality using iteration instead of recursion. The ``stack`` variable is used to maintain the processing context at each step of the loop. This approach provides explicit control over memory usage. If the stack grows beyond a predefined limit due to the structure or size of the input, the function returns an error rather than risking a stack overflow or out-of-memory exception. This ensures more predictable and robust behavior in resource-constrained environments.\n\n    .. rust-example::\n\n        // Recursive enum to represent a string or a list of `MyEnum`\n        #[allow(dead_code)]\n        enum MyEnum {\n            Str(String),\n            List(Vec<MyEnum>),\n        }\n\n        /// Concatenates strings from a nested structure of `MyEnum` without using recursion.\n        /// Returns an error if the stack size exceeds `MAX_STACK_SIZE`.\n        #[allow(dead_code)]\n        fn concat_strings_non_recursive(input: &[MyEnum]) -> Result<String, &'static str> {\n            const MAX_STACK_SIZE: usize = 1000;\n            let mut result = String::new();\n            let mut stack = Vec::new();\n\n            // Add all items to the stack\n            stack.extend(input.iter());\n\n            while let Some(item) = stack.pop() {\n                match item {\n                    MyEnum::Str(s) => result.insert_str(0, s),\n                    MyEnum::List(list) => {\n                        // Add list items to the stack\n                        for sub_item in list.iter() {\n                            stack.push(sub_item);\n                            if stack.len() > MAX_STACK_SIZE {\n                                return Err(\"Too big structure\");\n                            }\n                        }\n                    }\n                }\n            }\n            Ok(result)\n        }\n        #\n        # fn main() {}", "created_at": "", "decidability": "undecidable", "docname": "coding-guidelines/associated-items/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_vjgkg8kfi93", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_ot2Zt3dd6of1", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 16, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_gvoKeVSKK8fD", "non_compl_ex_MxqhjfkStJJy", "compl_ex_9pK3h65rfceO"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "1.3.0-latest", "scope": "system", "section_name": "Associated Items", "sections": ["Associated Items"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["stack-overflow"], "template": null, "title": "Recursive function are not allowed", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_uuDOArzyO3Qw": {"arch": {}, "avatar": "", "category": "mandatory", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Description of the guideline goes here.\n\n.. rationale::\n   :id: rat_dNgSvC0SZ3JJ\n   :status: draft\n\n   Explanation of why this guideline is important.\n\n.. non_compliant_example::\n   :id: non_compl_ex_g9j8shyGM2Rh\n   :status: draft\n\n   Explanation of code example.\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     fn example_function() {\n         // Non-compliant implementation\n     }\n     #\n     # fn main() {}\n\n.. compliant_example::\n   :id: compl_ex_cFPg6y7upNdl\n   :status: draft\n\n   Explanation of code example.\n\n   .. rust-example::\n\n     #[allow(dead_code)]\n     fn example_function() {\n         // Compliant implementation\n     }\n     #\n     # fn main() {}", "created_at": "", "decidability": "decidable", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_wjldgtio5o75", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_uuDOArzyO3Qw", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 596, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_dNgSvC0SZ3JJ", "non_compl_ex_g9j8shyGM2Rh", "compl_ex_cFPg6y7upNdl"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "todo", "scope": "system", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["reduce-human-error"], "template": null, "title": "Shall not write code that expands macros", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "gui_xztNdXA2oFNC": {"arch": {}, "avatar": "", "category": "advisory", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Parameters and variables with logically distinct types must be statically distinguishable by the type system.\n\nUse a newtype (e.g., ``struct Meters(u32);``) when:\n\n* Two or more quantities share the same underlying primitive representation but are logically distinct\n* Confusing them would constitute a semantic error\n* You need to improve type safety and encapsulation\n* You need to enable trait-based behavior\n* You need to establish new invariants\n\n.. rationale::\n   :id: rat_kYiIiW8R2qD2\n   :status: draft\n\n   This rule ensures that parameters and variables convey intent directly through the type system to avoid accidental misuse of values with identical primitives but different semantics.\n   In particular:\n\n   * Prevents mixing logically distinct values.\n     Primitive types like ``u32`` or ``u64`` can represent lengths, counters, timestamps, durations, IDs, or other values.\n     Different semantic domains can be confused, leading to incorrect computations.\n     The Rust type system prevents such mistakes when semantics are encoded into distinct types.\n   * Improves static safety.\n     Statically distinct types allow the compiler to enforce domain distinctions.\n     Accidental swapping of parameters or returning the wrong quantity becomes a compile-time error.\n   * Improves readability and discoverability.\n     Intent-revealing names (``Meters``, ``Seconds``, ``UserId``) make code self-documenting.\n     Type signatures become easier to read and understand.\n   * Enables domain-specific trait implementations.\n     Statically distinct types allow you to implement ``Add``, ``Mul``, or custom traits in ways that match the domain logic.\n     Aliases cannot do this, because they are not distinct types.\n   * Supports API evolution.\n     Statically distinct types act as strong API contracts that can evolve independently from their underlying representations.\n\n.. non_compliant_example::\n   :id: non_compl_ex_PO5TyFsRTlWw\n   :status: draft\n\n   This noncompliant example uses primitive types directly, leading to potential confusion between ``distance`` and ``time``.\n   Nothing prevents the caller from passing ``time`` as ``distance`` or vice-versa.\n   The units of each type are not clear from the function signature alone.\n   Mistakes compile cleanly and silently produce wrong results.\n\n    .. rust-example::\n\n      fn travel(distance: u32, time: u32) -> u32 {\n         distance / time\n      }\n\n      fn main() {\n         let d = 100;\n         let t = 10;\n         let _result = travel(t, d);  // Compiles, but semantically incorrect\n      }\n\n.. non_compliant_example::\n   :id: non_compl_ex_PO5TyFsRTlWv\n   :status: draft\n\n   This noncompliant example uses aliases instead of distinct types.\n   Aliases do not create new types, so the compiler cannot enforce distinctions between ``Meters`` and ``Seconds``.\n\n   Aliases cannot do this, because they are not distinct types.\n   This noncompliant example uses primitive types directly, leading to potential confusion between ``distance`` and ``time``.\n   Nothing prevents the caller from passing ``time`` as ``distance`` or vice-versa.\n   The units of each type are not clear from the function signature alone.\n   Mistakes compile cleanly and silently produce wrong results.\n\n    .. rust-example::\n\n      type Meters = u32;\n      type Seconds = u32;\n      type MetersPerSecond = u32;\n\n      fn travel(distance: Meters, time: Seconds) -> MetersPerSecond {\n         distance / time\n      }\n\n      fn main() {\n         let d: Meters = 100;\n         let t: Seconds = 10;\n         let _result = travel(t, d);  // Compiles, but semantically incorrect\n      }\n\n.. compliant_example::\n   :id: compl_ex_WTe7GoPu5Ez1\n   :status: draft\n\n   This compliant example uses newtypes to create distinct types for ``Meters``, ``Seconds``, and ``MetersPerSecond``.\n   The compiler enforces correct usage, preventing accidental swapping of parameters.\n   The function signature clearly conveys the intended semantics of each parameter and return value.\n\n    .. rust-example::\n\n      use std::ops::Div;\n\n      #[derive(Debug, Clone, Copy)]\n      struct Meters(u32);\n\n      #[derive(Debug, Clone, Copy)]\n      struct Seconds(u32);\n\n      #[derive(Debug, Clone, Copy)]\n      struct MetersPerSecond(u32);\n\n      impl Div<Seconds> for Meters {\n          type Output = MetersPerSecond;\n\n          fn div(self, rhs: Seconds) -> Self::Output {\n               MetersPerSecond(self.0 / rhs.0)\n          }\n       }\n\n       fn main() {\n           let d = Meters(100);\n           let t = Seconds(10);\n           let result = d / t;  // Clean and type-safe!\n           println!(\"Speed: {} m/s\", result.0);  // Access the inner value\n       }", "created_at": "", "decidability": "undecidable", "docname": "coding-guidelines/types-and-traits/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "fls_cokwseo3nnr", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "gui_xztNdXA2oFNC", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 16, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "", "parent_needs": [], "parent_needs_back": ["rat_kYiIiW8R2qD2", "non_compl_ex_PO5TyFsRTlWw", "non_compl_ex_PO5TyFsRTlWv", "compl_ex_WTe7GoPu5Ez1"], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "1.85.0;1.85.1", "scope": "module", "section_name": "Types and Traits", "sections": ["Types and Traits"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": ["types", "safety", "understandability"], "template": null, "title": "Use strong types to differentiate between logically distinct values", "type": "guideline", "type_name": "Guideline", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_0XeioBrgfh5z": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Both the division and remainder operations in this non-compliant example will panic if evaluated because the right operand is zero.\n\n.. rust-example::\n    :compile_fail:\n\n    fn main() {\n        let x = 0;\n        let _y = 5 / x; // This line will panic.\n        let _z = 5 % x; // This line would also panic.\n    }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_0XeioBrgfh5z", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 54, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_7y0GAMmtMhch", "parent_needs": ["gui_7y0GAMmtMhch"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_0ydPk7VENSrA": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Any use of ``as`` or ``transmute`` to create a pointer from an arithmetic address value\nis non-compliant:\n\n.. rust-example::\n  :miri:\n\n  #[allow(dead_code)]\n  fn f1(x: u16, y: i32, z: u64, w: usize) {\n    let _p1 = x as * const u32;  // not compliant\n    let _p2 = y as * const u32;  // not compliant\n    let _p3 = z as * const u32;  // not compliant\n    let _p4 = w as * const u32;  // not compliant despite being the right size\n\n    let _f: f64 = 10.0;\n    // let p5 = f as * const u32;  // not valid\n\n    unsafe {\n      // let p5: * const u32 = std::mem::transmute(x);  // not valid\n      // let p6: * const u32 = std::mem::transmute(y);  // not valid\n\n      #[allow(integer_to_ptr_transmutes)]\n      let _p7: * const u32 = std::mem::transmute(z); // not compliant\n      #[allow(integer_to_ptr_transmutes)]\n      let _p8: * const u32 = std::mem::transmute(w); // not compliant\n\n      let _p9: * const u32 = std::mem::transmute(_f); // not compliant, and very strange\n    }\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_0ydPk7VENSrA", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 554, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_PM8Vpf7lZ51U", "parent_needs": ["gui_PM8Vpf7lZ51U"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_AyFnP0lJLHxi": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of code example.\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  fn example_function() {\n      // Non-compliant implementation\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_AyFnP0lJLHxi", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 300, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_FRLaMIMb4t3S", "parent_needs": ["gui_FRLaMIMb4t3S"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_Bib7x9KmPq2nL": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This example shows code that violates the guideline.\n\n.. rust-example::\n\n   fn main() {\n       // Non-compliant code example\n       let x = 42;\n       println!(\"{}\", x);\n   }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_Bib7x9KmPq2nL", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1413, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_Bib7x9KmPq2nL", "parent_needs": ["gui_Bib7x9KmPq2nL"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_Bob7x9KmPq2nL": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This example shows code that violates the guideline.\n\n.. rust-example::\n\n   fn main() {\n       // Non-compliant code example\n       let x = 42;\n       println!(\"{}\", x);\n   }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_Bob7x9KmPq2nL", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1546, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_Bob7x9KmPq2nL", "parent_needs": ["gui_Bob7x9KmPq2nL"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_CkytKjRQezfQ": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This example makes assumptions about the layout of the address space that do not hold on all platforms.\nThe manipulated address may have discarded part of the original address space, and the flag may\nsilently interfere with the address value. On platforms where pointers are 64-bits this may have\nparticularly unexpected results.\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  fn f1(flag: u32, ptr: * const u32) {\n    /* ... */\n    let mut rep = ptr as usize;\n    rep = (rep & 0x7fffff) | ((flag as usize) << 23);\n    let _p2 = rep as * const u32;\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_CkytKjRQezfQ", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1176, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_iv9yCMHRgpE0", "parent_needs": ["gui_iv9yCMHRgpE0"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_Gb4zimei8cNI": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of code example.\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  fn example_function() {\n      // Non-compliant implementation\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_Gb4zimei8cNI", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 557, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_h0uG1C9ZjryA", "parent_needs": ["gui_h0uG1C9ZjryA"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_KLiDMsCesLx7": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This noncompliant example shifts by a negative value (-1) and also by greater than or equal to the number of bits that exist in the left operand (40):.\n\n.. rust-example::\n\n    fn main() {\n        let bits : u32 = 61;\n        let shifts = vec![-1, 4, 40];\n\n        for sh in shifts {\n            println!(\"{bits} << {sh} = {:?}\", bits << sh);\n        }\n    }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_KLiDMsCesLx7", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 447, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_LvmzGKdsAgI5", "parent_needs": ["gui_LvmzGKdsAgI5"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_LLs3vY8aGz0F": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This non-compliant example panics when the right operand is zero for either the division or remainder operations.\n\n.. rust-example::\n    :compile_fail:\n\n    fn main() {\n        let x = 0;\n        let _y = 5 / x; // Results in a panic.\n        let _z = 5 % x; // Also results in a panic.\n    }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_LLs3vY8aGz0F", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1278, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_kMbiWbn8Z6g5", "parent_needs": ["gui_kMbiWbn8Z6g5"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_MxqhjfkStJJy": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "The below function ``concat_strings`` is not complaint because it call itself and depending on depth of data provided as input it could generate an stack overflow exception or undefine behavior.\n\n.. rust-example::\n\n    // Recursive enum to represent a string or a list of `MyEnum`\n    #[allow(dead_code)]\n    enum MyEnum {\n        Str(String),\n        List(Vec<MyEnum>),\n    }\n\n    // Concatenates strings from a nested structure of `MyEnum` using recursion.\n    #[allow(dead_code)]\n    fn concat_strings(input: &[MyEnum]) -> String {\n        let mut result = String::new();\n        for item in input {\n            match item {\n                MyEnum::Str(s) => result.push_str(s),\n                MyEnum::List(list) => result.push_str(&concat_strings(list)),\n            }\n        }\n        result\n    }\n    #\n    # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/associated-items/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_MxqhjfkStJJy", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 34, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_ot2Zt3dd6of1", "parent_needs": ["gui_ot2Zt3dd6of1"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Associated Items", "sections": ["Associated Items"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_O9FZuazu3Lcm": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "The call to ``bits.wrapping_shl(sh)`` in this noncompliant example yields ``bits << mask(sh)``,\nwhere ``mask`` removes any high-order bits of ``sh`` that would cause the shift to exceed  the bitwidth of ``bits``.\nNote that this is not the same as a rotate-left.\nThe ``wrapping_shl`` has the same behavior as the ``<<`` operator in release mode.\n\n  .. rust-example::\n\n     fn main() {\n         let bits : u32 = 61;\n         let shifts = vec![4, 40];\n\n         for sh in shifts {\n             println!(\"{bits} << {sh} = {:?}\", bits.wrapping_shl(sh));\n         }\n     }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_O9FZuazu3Lcm", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 720, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_RHvQj8BHlz9b", "parent_needs": ["gui_RHvQj8BHlz9b"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_O9FZuazu3Lcn": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This noncompliant example shifts by a negative value (-1) and also by greater than or equal to the number of bits that exist in the left operand (40):.\n\n.. rust-example::\n\n    fn main() {\n        let bits : u32 = 61;\n        let shifts = vec![-1, 4, 40];\n\n        for sh in shifts {\n            println!(\"{bits} << {sh} = {:?}\", bits << sh);\n        }\n    }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_O9FZuazu3Lcn", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 683, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_RHvQj8BHlz9b", "parent_needs": ["gui_RHvQj8BHlz9b"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_O9FZuazu3Lcp": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "The call to ``bits.overflowing_shl(sh)`` in this noncompliant shifts ``bits`` left by ``sh`` bits.\nReturns a tuple of the shifted version of self along with a boolean indicating whether the shift value was larger than or equal to the number of bits.\nIf the shift value is too large, then value is masked (N-1) where N is the number of bits, and this value is used to perform the shift.\n\n  .. rust-example::\n\n     fn main() {\n         let bits: u32 = 61;\n         let shifts = vec![4, 40];\n\n         for sh in shifts {\n             let (result, overflowed) = bits.overflowing_shl(sh);\n             if overflowed {\n                 println!(\"{bits} << {sh} shift too large\");\n             } else {\n                 println!(\"{bits} << {sh} = {result}\");\n             }\n         }\n     }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_O9FZuazu3Lcp", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 763, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_RHvQj8BHlz9b", "parent_needs": ["gui_RHvQj8BHlz9b"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_O9FZuazu3Lcx": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This noncompliant example uses ``bits.unbounded_shr(sh)``.\nIf ``sh`` is larger or equal to the width of ``bits``,\nthe entire value is shifted out,\nwhich yields 0 for a positive number,\nand -1 for a negative number.\nThe use of this function is noncompliant because it does not detect out-of-range shifts.\n\n  .. rust-example::\n     :version: 1.87\n\n     fn main() {\n         let bits : u32 = 61;\n         let shifts = vec![4, 40];\n\n         for sh in shifts {\n             println!(\"{bits} << {sh} = {:?}\", bits.unbounded_shr(sh));\n         }\n     }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_O9FZuazu3Lcx", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 740, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_RHvQj8BHlz9b", "parent_needs": ["gui_RHvQj8BHlz9b"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_PO5TyFsRTlWv": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This noncompliant example uses aliases instead of distinct types.\nAliases do not create new types, so the compiler cannot enforce distinctions between ``Meters`` and ``Seconds``.\n\nAliases cannot do this, because they are not distinct types.\nThis noncompliant example uses primitive types directly, leading to potential confusion between ``distance`` and ``time``.\nNothing prevents the caller from passing ``time`` as ``distance`` or vice-versa.\nThe units of each type are not clear from the function signature alone.\nMistakes compile cleanly and silently produce wrong results.\n\n .. rust-example::\n\n   type Meters = u32;\n   type Seconds = u32;\n   type MetersPerSecond = u32;\n\n   fn travel(distance: Meters, time: Seconds) -> MetersPerSecond {\n      distance / time\n   }\n\n   fn main() {\n      let d: Meters = 100;\n      let t: Seconds = 10;\n      let _result = travel(t, d);  // Compiles, but semantically incorrect\n   }", "created_at": "", "decidability": "", "docname": "coding-guidelines/types-and-traits/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_PO5TyFsRTlWv", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 80, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_xztNdXA2oFNC", "parent_needs": ["gui_xztNdXA2oFNC"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Types and Traits", "sections": ["Types and Traits"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_PO5TyFsRTlWw": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This noncompliant example uses primitive types directly, leading to potential confusion between ``distance`` and ``time``.\nNothing prevents the caller from passing ``time`` as ``distance`` or vice-versa.\nThe units of each type are not clear from the function signature alone.\nMistakes compile cleanly and silently produce wrong results.\n\n .. rust-example::\n\n   fn travel(distance: u32, time: u32) -> u32 {\n      distance / time\n   }\n\n   fn main() {\n      let d = 100;\n      let t = 10;\n      let _result = travel(t, d);  // Compiles, but semantically incorrect\n   }", "created_at": "", "decidability": "", "docname": "coding-guidelines/types-and-traits/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_PO5TyFsRTlWw", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 59, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_xztNdXA2oFNC", "parent_needs": ["gui_xztNdXA2oFNC"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Types and Traits", "sections": ["Types and Traits"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_TZgk2vG42t2r": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Using a macro where a simple function would suffice, leads to hidden mutation:\n\n.. rust-example::\n\n  macro_rules! increment_and_double {\n      ($x:expr) => {\n          {\n              $x += 1; // mutation is implicit\n              $x * 2\n          }\n      };\n  }\n\n  fn main() {\n      let mut num = 5;\n      let result = increment_and_double!(num);\n      println!(\"Result: {}, Num: {}\", result, num);\n      // Result: 12, Num: 6\n  }\n\nIn this example, calling the macro both increments and returns the value in one go\u2014without any clear indication in its \"signature\" that it mutates its argument. As a result, num is changed behind the scenes, which can surprise readers and make debugging more difficult.", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_TZgk2vG42t2r", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 114, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_2jjWUoF1teOY", "parent_needs": ["gui_2jjWUoF1teOY"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_TjRiRkmBY6wG": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of code example.\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  fn example_function() {\n      // Non-compliant implementation\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_TjRiRkmBY6wG", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 443, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_WJlWqgIxmE8P", "parent_needs": ["gui_WJlWqgIxmE8P"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_V37Pl103aUW4": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "The following code leaves it up to type inference to figure out the concrete types of the raw pointer casts, allowing changes to ``with_base``'s function signature to affect the types the function body of ``non_compliant_example`` without incurring a compiler error.\n\n.. rust-example::\n   :miri:\n\n   #[repr(C)]\n   #[allow(dead_code)]\n   struct Base {\n      position: (u32, u32)\n   }\n\n   #[repr(C)]\n   #[allow(dead_code)]\n   struct Extended {\n      base: Base,\n      scale: f32\n   }\n\n   #[allow(dead_code)]\n   fn non_compliant_example(extended: &Extended) {\n      let extended = extended as *const _;\n      with_base(unsafe { &*(extended as *const _) })\n   }\n\n   fn with_base(_: &Base) {}\n   #\n   # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_V37Pl103aUW4", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 291, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_HDnAZ7EZ4z6G", "parent_needs": ["gui_HDnAZ7EZ4z6G"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_cCh2RQUXeH0N": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This noncompliant code example can result in arithmetic overflow during the addition of the signed operands ``si_a`` and ``si_b``:\n\n.. rust-example::\n\n    #[allow(dead_code)]\n    fn add(si_a: i32, si_b: i32) {\n      let _sum: i32 = si_a + si_b;\n      // ...\n    }\n    #\n    # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_cCh2RQUXeH0N", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 867, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_dCquvqE1csI3", "parent_needs": ["gui_dCquvqE1csI3"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_cCh2RQUXeH0O": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This noncompliant code example example prevents divide-by-zero errors, but does not prevent arithmetic overflow.\n\n.. rust-example::\n\n    # #[derive(Debug)]\n    #[allow(dead_code)]\n    enum DivError { DivisionByZero, Overflow }\n\n    #[allow(dead_code)]\n    fn div(s_a: i64, s_b: i64) -> Result<i64, DivError> {\n        if s_b == 0 {\n            Err(DivError::DivisionByZero)\n        } else {\n            Ok(s_a / s_b)\n        }\n    }\n    #\n    # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_cCh2RQUXeH0O", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1099, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_dCquvqE1csI3", "parent_needs": ["gui_dCquvqE1csI3"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_eW374waRPbeL": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "The ``#[test]`` attribute macro transforms the function into a test harness entry point.\n\n.. rust-example::\n    :no_run:\n\n    #[test]  // non-compliant: attribute macro rewrites the item\n    fn example_test() {\n        assert!(true);\n    }\n    #\n    # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_eW374waRPbeL", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 35, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_13XWp3mb0g2P", "parent_needs": ["gui_13XWp3mb0g2P"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_g9j8shyGM2Rh": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of code example.\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  fn example_function() {\n      // Non-compliant implementation\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_g9j8shyGM2Rh", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 614, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_uuDOArzyO3Qw", "parent_needs": ["gui_uuDOArzyO3Qw"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_hP5KLhqQfDcd": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of code example.\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  fn example_function() {\n      // Non-compliant implementation\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_hP5KLhqQfDcd", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 500, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_a1mHfjgKk4Xr", "parent_needs": ["gui_a1mHfjgKk4Xr"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_hzGUYoMnK59w": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "``as`` used here can change the value range or lose precision.\nEven when it doesn't, nothing enforces the correct behaviour or communicates whether\nwe intend to allow lossy conversions, or only expect valid conversions.\n\n.. rust-example::\n\n   #[allow(dead_code)]\n   fn f1(x: u16, y: i32, _z: u64, w: u8) {\n     let _a = w as char;           // non-compliant\n     let _b = y as u32;            // non-compliant - changes value range, converting negative values\n     let _c = x as i64;            // non-compliant - could use .into()\n\n     let d = y as f32;            // non-compliant - lossy\n     let e = d as f64;            // non-compliant - could use .into()\n     let _f = e as f32;            // non-compliant - lossy\n\n     let _g = e as i64;            // non-compliant - lossy despite object size\n\n     let b: u32 = 0;\n     let p1: * const u32 = &b;\n     let _a1 = p1 as usize;        // compliant by exception\n     let _a2 = p1 as u16;          // non-compliant - may lose address range\n     let _a3 = p1 as u64;          // non-compliant - use usize to indicate intent\n\n     let a1 = p1 as usize;\n     let _p2 = a1 as * const u32;  // non-compliant - prefer transmute\n     let a2 = p1 as u16;\n     let _p3 = a2 as * const u32;  // non-compliant (and most likely not in a valid address range)\n   }\n   #\n   # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_hzGUYoMnK59w", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 170, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_ADHABsmK9FXz", "parent_needs": ["gui_ADHABsmK9FXz"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_lRt4LBen6Lkc": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of code example.\n\n.. rust-example::\n\n  #[allow(dead_code)]\n  fn example_function() {\n      // Non-compliant implementation\n  }\n  #\n  # fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_lRt4LBen6Lkc", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 243, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_8hs33nyp0ipX", "parent_needs": ["gui_8hs33nyp0ipX"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_m2XR1ihTbCQS": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "The following is a macro which shows referring to a vector entity using a non-global path. Depending on\nwhere the macro is used a different `Vec` could be used than is intended. If scope where this is used\ndefines a struct `Vec` which is not preset at the macro definition, the macro user might be intending to\nuse that in the macro.\n\n.. rust-example::\n\n  #[macro_export]\n  macro_rules! my_vec {\n      ( $( $x:expr ),* ) => {\n          {\n              let mut temp_vec = Vec::new(); // non-global path\n              $(\n                  temp_vec.push($x);\n              )*\n              temp_vec\n          }\n      };\n  }\n\n  fn main() {\n      let _ = my_vec![1, 2, 3];\n  }", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_m2XR1ihTbCQS", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 361, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_SJMrWDYZ0dN4", "parent_needs": ["gui_SJMrWDYZ0dN4"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_mvkgTL3kulZ5": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This noncompliant example test the value of ``sh`` to ensure the value of the right operand is negative or greater\nthan or equal to the width of the left operand.\n\n.. rust-example::\n\n    fn main() {\n        let bits: u32 = 61;\n        let shifts = vec![-1, 0, 4, 40];\n\n        for sh in shifts {\n            if sh >= 0 && sh < 32 {\n                println!(\"{bits} << {sh} = {}\", bits << sh);\n            }\n         }\n    }", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_mvkgTL3kulZ5", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 700, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_RHvQj8BHlz9b", "parent_needs": ["gui_RHvQj8BHlz9b"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "non_compl_ex_pJhVZW6a1HP9": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "(example of a simple expansion using a proc-macro)\n\n.. rust-example::\n\n  // TODO\n  fn main() {}", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "non_compl_ex_pJhVZW6a1HP9", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 194, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_66FSqzD55VRZ", "parent_needs": ["gui_66FSqzD55VRZ"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "non_compliant_example", "type_name": "Non-Compliant Example", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_3MpR8QfHodGT": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Avoid out-of-range shifts in shift left and shift right expressions.\nShifting by a negative value, or by a value greater than or equal to the width of the left operand\nare non-sensical expressions which typically indicate a logic error has occurred.", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_3MpR8QfHodGT", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 675, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_RHvQj8BHlz9b", "parent_needs": ["gui_RHvQj8BHlz9b"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_62mSorNF05kD": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of why this guideline is important.", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_62mSorNF05kD", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 494, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_a1mHfjgKk4Xr", "parent_needs": ["gui_a1mHfjgKk4Xr"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_AmCavSymv3Ev": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Procedural macros are not restricted to pure transcription and can contain arbitrary Rust code.\nThis means they can be harder to understand, and cannot be as easily proved to work as intended.\nProcedural macros can have arbitrary side effects, which can exhaust compiler resources or\nexpose a vulnerability for users of adopted code.", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_AmCavSymv3Ev", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 185, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_66FSqzD55VRZ", "parent_needs": ["gui_66FSqzD55VRZ"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_Bib7x9KmPq2nL": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nRefer to :cite:`gui_Bib7x9KmPq2nL:RUST-REF-UNION` for more details.", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_Bib7x9KmPq2nL", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1347, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_Bib7x9KmPq2nL", "parent_needs": ["gui_Bib7x9KmPq2nL"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_Bob7x9KmPq2nL": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nThis guideline demonstrates how to include bibliographic references in coding guidelines.\nReferences help users find authoritative sources for the recommendations made.\n\nRefer to :cite:`gui_Bob7x9KmPq2nL:RUST-REF-UNION` for more details.", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_Bob7x9KmPq2nL", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1480, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_Bob7x9KmPq2nL", "parent_needs": ["gui_Bob7x9KmPq2nL"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_C8RRidiVzhRj": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of why this guideline is important.", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_C8RRidiVzhRj", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 437, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_WJlWqgIxmE8P", "parent_needs": ["gui_WJlWqgIxmE8P"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_LvrS1jTCXEOk": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Eliminate arithmetic overflow to avoid runtime panics and unexpected wraparound behavior.\nArithmetic overflow will panic in debug mode, but wraparound in release mode, resulting in inconsistent behavior.\nUse explicit `wrapping <https://doc.rust-lang.org/std/num/struct.Wrapping.html>`_ or\n`saturating <https://doc.rust-lang.org/std/num/struct.Saturating.html>`_ semantics where these behaviors are intentional.\nRange checking can be used to eliminate the possibility of arithmetic overflow.", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_LvrS1jTCXEOk", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 857, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_dCquvqE1csI3", "parent_needs": ["gui_dCquvqE1csI3"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_M9bp23ctkzQ7": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Although the compiler reports both the macro expansion and its invocation site, diagnostics originating within macros can be more difficult to interpret than those from ordinary function or type definitions. Complex or deeply nested macros may obscure intent and hinder static analysis, increasing the risk of misinterpretation or overlooked errors during code review.\n\n\n**Debugging Complexity**\n\n- Errors point to expanded code rather than source locations, making it difficult to trace compile-time errors back to the original macro invocation.\n\n**Optimization**\n\n- Macros may inhibit compiler optimizations that work better with functions.\n- Macros act like ``#[inline(always)]`` functions, which can lead to code bloat.\n- They don't benefit from the compiler's inlining heuristics, missing out on selective inlining where the compiler decides when inlining is beneficial.\n\n**Functions provide**\n\n- Clear type signatures.\n- Predictable behavior.\n- Proper stack traces.\n- Consistent optimization opportunities.", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_M9bp23ctkzQ7", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 89, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_2jjWUoF1teOY", "parent_needs": ["gui_2jjWUoF1teOY"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_OhxKm751axKw": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "The mapping between pointers and integers must be consistent with the addressing structure of the\nexecution environment. Issues may arise, for example, on architectures that have a segmented memory model.", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_OhxKm751axKw", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1169, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_iv9yCMHRgpE0", "parent_needs": ["gui_iv9yCMHRgpE0"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_U3AEUPyaUhcb": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of why this guideline is important.", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_U3AEUPyaUhcb", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 551, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_h0uG1C9ZjryA", "parent_needs": ["gui_h0uG1C9ZjryA"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_VRNXaxmW1l2s": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Using a path that refers to an entity relatively inside of a macro subjects it to path resolution\nresults which may change depending on where the macro is used. The intended path to refer to an entity\ncan be shadowed when using a macro leading to unexpected behaviors. This could lead to developer confusion\nabout why a macro behaves differently in diffenent locations, or confusion about where entity in a macro\nwill resolve to.", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_VRNXaxmW1l2s", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 351, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_SJMrWDYZ0dN4", "parent_needs": ["gui_SJMrWDYZ0dN4"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_WJubG7KuUDLW": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of why this guideline is important.", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_WJubG7KuUDLW", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 294, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_FRLaMIMb4t3S", "parent_needs": ["gui_FRLaMIMb4t3S"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_X8uCF5yx7Mpo": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Attribute macros are able to rewrite items entirely or in other unexpected ways which can cause confusion and introduce errors.", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_X8uCF5yx7Mpo", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 29, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_13XWp3mb0g2P", "parent_needs": ["gui_13XWp3mb0g2P"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_YqhEiWTj9z6L": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "A pointer created from an arbitrary arithmetic expression may designate an invalid address,\nincluding an address that does not point to a valid object, an address that points to an\nobject of the wrong type, or an address that is not properly aligned. Use of such a pointer\nto access memory will result in undefined behavior.\n\nThe ``as`` operator also does not check that the size of the source operand is the same as\nthe size of a pointer, which may lead to unexpected results if the address computation was\noriginally performed in a differently-sized address space.\n\nWhile ``as`` can notionally be used to create a null pointer, the functions\n:std:`core::ptr::null` and :std:`core::ptr::null_mut` are the more idiomatic way to do this.", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_YqhEiWTj9z6L", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 538, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_PM8Vpf7lZ51U", "parent_needs": ["gui_PM8Vpf7lZ51U"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_dNgSvC0SZ3JJ": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of why this guideline is important.", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_dNgSvC0SZ3JJ", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 608, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_uuDOArzyO3Qw", "parent_needs": ["gui_uuDOArzyO3Qw"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_e9iS187skbHH": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Explanation of why this guideline is important.", "created_at": "", "decidability": "", "docname": "coding-guidelines/macros/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_e9iS187skbHH", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 237, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_8hs33nyp0ipX", "parent_needs": ["gui_8hs33nyp0ipX"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Macros", "sections": ["Macros"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_gvoKeVSKK8fD": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Recursive functions can easily cause stack overflows, which may result in exceptions or, in some cases, undefined behavior (typically some embedded systems). Although the Rust compiler supports `tail call optimization <https://en.wikipedia.org/wiki/Tail_call>`_\\ , this optimization is not guaranteed and depends on the specific implementation and function structure. There is an `open RFC to guarantee tail call optimization in the Rust compiler <https://github.com/phi-go/rfcs/blob/guaranteed-tco/text/0000-explicit-tail-calls.md>`_\\ , but this feature has not yet been stabilized. Until tail call optimization is guaranteed and stabilized, developers should avoid using recursive functions to prevent potential stack overflows and ensure program reliability.", "created_at": "", "decidability": "", "docname": "coding-guidelines/associated-items/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_gvoKeVSKK8fD", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 28, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_ot2Zt3dd6of1", "parent_needs": ["gui_ot2Zt3dd6of1"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Associated Items", "sections": ["Associated Items"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_h84NjY2tLSBW": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Integer division by zero results in a panic; an abnormal program state that may terminate the process and must be avoided.", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_h84NjY2tLSBW", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 1272, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_kMbiWbn8Z6g5", "parent_needs": ["gui_kMbiWbn8Z6g5"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_h8LdJQ1MNKu9": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "``var as Type`` casts and :std:`core::mem::transmute`\\s between raw pointer types are generally valid and unchecked by the compiler as long the target pointer type is a thin pointer.\nNot specifying the concrete target pointer type allows the compiler to infer it from the surroundings context which may result in the cast accidentally changing due to surrounding type changes resulting in semantically invalid pointer casts.\n\nRaw pointers have a variety of invariants to manually keep track of.\nSpecifying the concrete types in these scenarios allows the compiler to catch some of these potential issues for the user.", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_h8LdJQ1MNKu9", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 281, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_HDnAZ7EZ4z6G", "parent_needs": ["gui_HDnAZ7EZ4z6G"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_kYiIiW8R2qD2": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "This rule ensures that parameters and variables convey intent directly through the type system to avoid accidental misuse of values with identical primitives but different semantics.\nIn particular:\n\n* Prevents mixing logically distinct values.\n  Primitive types like ``u32`` or ``u64`` can represent lengths, counters, timestamps, durations, IDs, or other values.\n  Different semantic domains can be confused, leading to incorrect computations.\n  The Rust type system prevents such mistakes when semantics are encoded into distinct types.\n* Improves static safety.\n  Statically distinct types allow the compiler to enforce domain distinctions.\n  Accidental swapping of parameters or returning the wrong quantity becomes a compile-time error.\n* Improves readability and discoverability.\n  Intent-revealing names (``Meters``, ``Seconds``, ``UserId``) make code self-documenting.\n  Type signatures become easier to read and understand.\n* Enables domain-specific trait implementations.\n  Statically distinct types allow you to implement ``Add``, ``Mul``, or custom traits in ways that match the domain logic.\n  Aliases cannot do this, because they are not distinct types.\n* Supports API evolution.\n  Statically distinct types act as strong API contracts that can evolve independently from their underlying representations.", "created_at": "", "decidability": "", "docname": "coding-guidelines/types-and-traits/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_kYiIiW8R2qD2", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 36, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_xztNdXA2oFNC", "parent_needs": ["gui_xztNdXA2oFNC"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Types and Traits", "sections": ["Types and Traits"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_tVkDl6gOqz25": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Avoid out-of-range shifts in shift left and shift right expressions.\nShifting by a negative value, or by a value greater than or equal to the width of the left operand\nare non-sensical expressions which typically indicate a logic error has occurred.", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_tVkDl6gOqz25", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 439, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_LvmzGKdsAgI5", "parent_needs": ["gui_LvmzGKdsAgI5"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_v56bjjcveLxQ": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Although the conversions performed by ``as`` between numeric types are all well-defined, ``as`` coerces\nthe value to fit in the destination type, which may result in unexpected data loss if the value needs to\nbe truncated, rounded, or produce a nearest possible non-equal value.\n\nAlthough some conversions are lossless, others are not symmetrical. Instead of relying on either a defined\nlossy behaviour or risking loss of precision, the code can communicate intent by using ``Into`` or ``From``\nand ``TryInto`` or ``TryFrom`` to signal which conversions are intended to perfectly preserve the original\nvalue, and which are intended to be fallible. The latter cannot be used from const functions, indicating\nthat these should avoid using fallible conversions.\n\nA pointer-to-address cast does not lose value, but will be truncated unless the destination type is large\nenough to hold the address value. The ``usize`` type is guaranteed to be wide enough for this purpose.\n\nA pointer-to-address cast is not symmetrical because the resulting pointer may not point to a valid object,\nmay not point to an object of the right type, or may not be properly aligned.\nIf a conversion in this direction is needed, :std:`std::mem::transmute` will communicate the intent to perform\nan unsafe operation.", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_v56bjjcveLxQ", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 148, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_ADHABsmK9FXz", "parent_needs": ["gui_ADHABsmK9FXz"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "rat_vLFlPWSCHRje": {"arch": {}, "avatar": "", "category": "", "closed_at": "", "completion": "", "constraints": [], "constraints_passed": true, "constraints_results": {}, "content": "Integer division and integer remainder division both panic when the right operand has a value of zero.\nDivision by zero is undefined in mathematics because it leads to contradictions and there is no consistent value that can be assigned as its result.", "created_at": "", "decidability": "", "docname": "coding-guidelines/expressions/index", "doctype": ".rst", "duration": "", "external_css": "external_link", "external_url": null, "fls": "", "has_dead_links": false, "has_forbidden_dead_links": false, "id": "rat_vLFlPWSCHRje", "id_prefix": "", "is_external": false, "is_modified": false, "is_need": true, "is_part": false, "jinja_content": false, "layout": "", "lineno": 47, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": "gui_7y0GAMmtMhch", "parent_needs": ["gui_7y0GAMmtMhch"], "parent_needs_back": [], "parts": {}, "post_template": null, "pre_template": null, "prefix": "", "query": "", "recommendation": "", "release": "", "scope": "", "section_name": "Expressions", "sections": ["Expressions"], "service": "", "signature": "", "specific": "", "status": "draft", "style": null, "tags": [], "template": null, "title": "", "type": "rationale", "type_name": "Rationale", "updated_at": "", "url": "", "url_postfix": "", "user": ""}}, "needs_amount": 108, "needs_schema": {"$schema": "http://json-schema.org/draft-07/schema#", "properties": {"arch": {"additionalProperties": {"type": "string"}, "default": {}, "description": "Mapping of uml key to uml content.", "field_type": "core", "type": "object"}, "avatar": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "category": {"default": "", "description": "Added by needs_extra_options config", "field_type": "extra", "type": "string"}, "closed_at": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "completion": {"default": "", "description": "Added for needgantt functionality", "field_type": "extra", "type": "string"}, "constraints": {"default": [], "description": "List of constraint names, which are defined for this need.", "field_type": "core", "items": {"type": "string"}, "type": "array"}, "constraints_error": {"default": "", "description": "An error message set if any constraint failed, and `error_message` field is set in config.", "field_type": "core", "type": "string"}, "constraints_passed": {"default": true, "description": "True if all constraints passed, False if any failed, None if not yet checked.", "field_type": "core", "type": "boolean"}, "constraints_results": {"additionalProperties": {"type": "object"}, "default": {}, "description": "Mapping of constraint name, to check name, to result.", "field_type": "core", "type": "object"}, "content": {"default": "", "description": "Content of the need.", "field_type": "core", "type": "string"}, "created_at": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "decidability": {"default": "", "description": "Added by needs_extra_options config", "field_type": "extra", "type": "string"}, "docname": {"default": null, "description": "Name of the document where the need is defined (None if external).", "field_type": "core", "type": ["string", "null"]}, "doctype": {"default": ".rst", "description": "Type of the document where the need is defined, e.g. '.rst'.", "field_type": "core", "type": "string"}, "duration": {"default": "", "description": "Added for needgantt functionality", "field_type": "extra", "type": "string"}, "external_css": {"default": "", "description": "CSS class name, added to the external reference.", "field_type": "core", "type": "string"}, "external_url": {"default": null, "description": "URL of the need, if it is an external need.", "field_type": "core", "type": ["string", "null"]}, "fls": {"default": "", "description": "Added by needs_extra_options config", "field_type": "extra", "type": "string"}, "has_dead_links": {"default": false, "description": "True if any links reference need ids that are not found in the need list.", "field_type": "core", "type": "boolean"}, "has_forbidden_dead_links": {"default": false, "description": "True if any links reference need ids that are not found in the need list, and the link type does not allow dead links.", "field_type": "core", "type": "boolean"}, "id": {"description": "ID of the data.", "field_type": "core", "type": "string"}, "id_prefix": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "is_external": {"default": false, "description": "If true, no node is created and need is referencing external url.", "field_type": "core", "type": "boolean"}, "is_modified": {"default": false, "description": "Whether the need was modified by needextend.", "field_type": "core", "type": "boolean"}, "is_need": {"default": true, "description": "Whether the need is a need.", "field_type": "core", "type": "boolean"}, "is_part": {"default": false, "description": "Whether the need is a part.", "field_type": "core", "type": "boolean"}, "jinja_content": {"default": false, "description": "Whether the content should be pre-processed by jinja.", "field_type": "core", "type": "boolean"}, "layout": {"default": null, "description": "Key of the layout, which is used to render the need.", "field_type": "core", "type": ["string", "null"]}, "lineno": {"default": null, "description": "Line number where the need is defined (None if external).", "field_type": "core", "type": ["integer", "null"]}, "links": {"default": [], "description": "Link field", "field_type": "links", "items": {"type": "string"}, "type": "array"}, "links_back": {"default": [], "description": "Backlink field", "field_type": "backlinks", "items": {"type": "string"}, "type": "array"}, "max_amount": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "max_content_lines": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "modifications": {"default": 0, "description": "Number of modifications by needextend.", "field_type": "core", "type": "integer"}, "params": {"default": "", "description": "Added by service open-needs", "field_type": "extra", "type": "string"}, "parent_need": {"default": "", "description": "Simply the first parent id.", "field_type": "core", "type": "string"}, "parent_needs": {"default": [], "description": "Link field", "field_type": "links", "items": {"type": "string"}, "type": "array"}, "parent_needs_back": {"default": [], "description": "Backlink field", "field_type": "backlinks", "items": {"type": "string"}, "type": "array"}, "parts": {"additionalProperties": {"type": "object"}, "default": {}, "description": "Mapping of parts, a.k.a. sub-needs, IDs to data that overrides the need's data", "field_type": "core", "type": "object"}, "post_content": {"default": "", "description": "Post-content of the need.", "field_type": "core", "type": "string"}, "post_template": {"default": null, "description": "Post-template of the need.", "field_type": "core", "type": ["string", "null"]}, "pre_content": {"default": "", "description": "Pre-content of the need.", "field_type": "core", "type": "string"}, "pre_template": {"default": null, "description": "Pre-template of the need.", "field_type": "core", "type": ["string", "null"]}, "prefix": {"default": "", "description": "Added by service open-needs", "field_type": "extra", "type": "string"}, "query": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "recommendation": {"default": "", "description": "Added by needs_extra_options config", "field_type": "extra", "type": "string"}, "release": {"default": "", "description": "Added by needs_extra_options config", "field_type": "extra", "type": "string"}, "scope": {"default": "", "description": "Added by needs_extra_options config", "field_type": "extra", "type": "string"}, "section_name": {"default": "", "description": "Simply the first section.", "field_type": "core", "type": "string"}, "sections": {"default": [], "description": "Sections of the need.", "field_type": "core", "items": {"type": "string"}, "type": "array"}, "service": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "signature": {"default": "", "description": "Derived from a docutils desc_name node.", "field_type": "core", "type": "string"}, "specific": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "status": {"default": null, "description": "Status of the need.", "field_type": "core", "type": ["string", "null"]}, "style": {"default": null, "description": "Comma-separated list of CSS classes (all appended by `needs_style_`).", "field_type": "core", "type": ["string", "null"]}, "tags": {"default": [], "description": "List of tags.", "field_type": "core", "items": {"type": "string"}, "type": "array"}, "template": {"default": null, "description": "Template of the need.", "field_type": "core", "type": ["string", "null"]}, "title": {"description": "Title of the need.", "field_type": "core", "type": "string"}, "type": {"default": "", "description": "Type of the need.", "field_type": "core", "type": "string"}, "type_name": {"default": "", "description": "Name of the type.", "field_type": "core", "type": "string"}, "updated_at": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "url": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "url_postfix": {"default": "", "description": "Added by service open-needs", "field_type": "extra", "type": "string"}, "user": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}}, "type": "object"}}}}