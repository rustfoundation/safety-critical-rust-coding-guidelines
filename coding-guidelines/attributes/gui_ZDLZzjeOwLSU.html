

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Assure visibility of unsafe keyword in unsafe code &mdash; Safety-Critical Rust Coding Guidelines 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../_static/rust_playground.css?v=a15f506b" />
      <link rel="stylesheet" type="text/css" href="../../_static/citation.css?v=569c3786" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/need_links.css?v=2150a916" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/need_style.css?v=92936fa5" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/needstable.css?v=5e1b6797" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/need_toggle.css?v=5c6620df" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/need_core.css?v=f5b60a78" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/modern.css?v=803738c0" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=558c75d0" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/rust_playground.js?v=acd109cb"></script>
      <script src="../../_static/citation.js?v=1e6d5203"></script>
      <script src="../../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
      <script src="../../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
      <script src="../../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
      <script src="../../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
      <script src="../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=dca66431"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Entities And Resolution" href="../entities-and-resolution/index.html" />
    <link rel="prev" title="Attributes" href="index.html" /> 
<link rel="stylesheet" href="../../_static/fls_links.css" type="text/css" />
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Safety-Critical Rust Coding Guidelines
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Coding Guidelines</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../types-and-traits/index.html">Types and Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../patterns/index.html">Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../expressions/index.html">Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../values/index.html">Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="../statements/index.html">Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/index.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../associated-items/index.html">Associated Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../implementations/index.html">Implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generics/index.html">Generics</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Attributes</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Assure visibility of <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> keyword in unsafe code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../entities-and-resolution/index.html">Entities And Resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ownership-and-destruction/index.html">Ownership And Destruction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exceptions-and-errors/index.html">Exceptions And Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concurrency/index.html">Concurrency</a></li>
<li class="toctree-l2"><a class="reference internal" href="../program-structure-and-compilation/index.html">Program Structure And Compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unsafety/index.html">Unsafety</a></li>
<li class="toctree-l2"><a class="reference internal" href="../macros/index.html">Macros</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ffi/index.html">Ffi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inline-assembly/index.html">Inline Assembly</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../compliance/index.html">Compliance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/index.html">Appendices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../retired-guidelines/index.html">Retired Guidelines</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Safety-Critical Rust Coding Guidelines</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Coding Guidelines</a></li>
          <li class="breadcrumb-item"><a href="index.html">Attributes</a></li>
      <li class="breadcrumb-item active">Assure visibility of <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> keyword in unsafe code</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/coding-guidelines/attributes/gui_ZDLZzjeOwLSU.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="assure-visibility-of-unsafe-keyword-in-unsafe-code">
<h1>Assure visibility of <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> keyword in unsafe code<a class="headerlink" href="#assure-visibility-of-unsafe-keyword-in-unsafe-code" title="Link to this heading"></a></h1>
<div class="need_container docutils container" id="SNCB-76523d32">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_guideline docutils align-default" id="gui_ZDLZzjeOwLSU">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Guideline</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">Assure visibility of ``unsafe`` keyword in unsafe code</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#gui_ZDLZzjeOwLSU" title="gui_ZDLZzjeOwLSU">gui_ZDLZzjeOwLSU</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">draft</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">readability</span><span class="needs_spacer">, </span><span class="needs_data">reduce-human-error</span></span></span></div>
<div class="line"><span class="needs_category"><span class="needs_label">category: </span><span class="needs_data">required</span></span></div>
<div class="line"><span class="needs_fls"><span class="needs_label">fls: </span><span class="needs_data"><a href="https://rust-lang.github.io/fls/unsafety.html#fls_8kqo952gjhaf" class="fls-id">fls_8kqo952gjhaf</a></span></span></div>
<div class="line"><span class="needs_decidability"><span class="needs_label">decidability: </span><span class="needs_data">decidable</span></span></div>
<div class="line"><span class="needs_scope"><span class="needs_label">scope: </span><span class="needs_data">crate</span></span></div>
<div class="line"><span class="needs_release"><span class="needs_label">release: </span><span class="needs_data">1.85-latest</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">child needs: <span class="parent_needs"><span><a class="reference internal" href="#rat_eQV3s9ggNegr" title="gui_ZDLZzjeOwLSU">rat_eQV3s9ggNegr</a>, <a class="reference internal" href="#non_compl_ex_FdmuPXGZr4EP" title="gui_ZDLZzjeOwLSU">non_compl_ex_FdmuPXGZr4EP</a>, <a class="reference internal" href="#compl_ex_wR1FEyLRKmrr" title="gui_ZDLZzjeOwLSU">compl_ex_wR1FEyLRKmrr</a>, <a class="reference internal" href="#non_compl_ex_FdmuPXGZr4EO" title="gui_ZDLZzjeOwLSU">non_compl_ex_FdmuPXGZr4EO</a>, <a class="reference internal" href="#compl_ex_wR1FEyLRKmrq" title="gui_ZDLZzjeOwLSU">compl_ex_wR1FEyLRKmrq</a>, <a class="reference internal" href="#non_compl_ex_Hk3mNp5qRs7t" title="gui_ZDLZzjeOwLSU">non_compl_ex_Hk3mNp5qRs7t</a>, <a class="reference internal" href="#compl_ex_xY2zAb3cDe4f" title="gui_ZDLZzjeOwLSU">compl_ex_xY2zAb3cDe4f</a>, <a class="reference internal" href="#bib_n8YJHvQf4mWx" title="gui_ZDLZzjeOwLSU">bib_n8YJHvQf4mWx</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p>Mark all code that may violate safety guarantees with a visible <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> keyword
<a class="citation-ref reference internal" href="#cite-gui_ZDLZzjeOwLSU-RUST-REF-UNSAFE-KEYWORD">[RUST-REF-UNSAFE-KEYWORD]</a>.</p>
<p>The following constructs require explicit <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> visibility:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">extern</span></code> blocks must be declared as <code class="docutils literal notranslate"><span class="pre">unsafe</span> <span class="pre">extern</span></code></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">#[no_mangle]</span></code> attribute must be written as <code class="docutils literal notranslate"><span class="pre">#[unsafe(no_mangle)]</span></code></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">#[export_name]</span></code> attribute must be written as <code class="docutils literal notranslate"><span class="pre">#[unsafe(export_name)]</span></code></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">#[link_section]</span></code> attribute must be written as <code class="docutils literal notranslate"><span class="pre">#[unsafe(link_section)]</span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Starting with Rust Edition 2024, the use of <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> is required in these contexts.
The <code class="docutils literal notranslate"><span class="pre">#[link]</span></code> and <code class="docutils literal notranslate"><span class="pre">#[link_ordinal]</span></code> attributes are implicitly covered by the
<code class="docutils literal notranslate"><span class="pre">unsafe</span> <span class="pre">extern</span></code> requirement, as they must appear on <code class="docutils literal notranslate"><span class="pre">extern</span></code> blocks.
See rust-lang/rust#82499 for the tracking issue on unsafe attributes.</p>
</div>
<div class="need_container docutils container" id="SNCB-baa4d220">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_rationale docutils align-default" id="rat_eQV3s9ggNegr">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Rationale</span></span>: </span><strong><span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#rat_eQV3s9ggNegr" title="rat_eQV3s9ggNegr">rat_eQV3s9ggNegr</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">draft</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">parent needs: <span class="parent_needs"><span><a class="reference internal" href="#gui_ZDLZzjeOwLSU" title="rat_eQV3s9ggNegr">gui_ZDLZzjeOwLSU</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><ul class="simple">
<li><p>Auditability and review</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">unsafe</span></code> blocks create clear audit boundaries where reviewers can focus on code
that may violate Rust’s safety guarantees <a class="citation-ref reference internal" href="#cite-gui_ZDLZzjeOwLSU-RUSTNOMICON-MEET-SAFE">[RUSTNOMICON-MEET-SAFE]</a></p></li>
<li><p>Safety-critical standards like ISO 26262 <a class="citation-ref reference internal" href="#cite-gui_ZDLZzjeOwLSU-ISO-26262">[ISO-26262]</a> and
DO-178C <a class="citation-ref reference internal" href="#cite-gui_ZDLZzjeOwLSU-DO-178C">[DO-178C]</a> require traceability of hazardous operations</p></li>
<li><p>Helps enumerate and document all places where safety requirements must be manually upheld</p></li>
<li><p>Satisfies ISO 26262 Part 6, Table 1, objective 1c (use of language subsets)</p></li>
<li><p>Satisfies DO-178C Section 6.3.4.f (source code traceability)</p></li>
</ul>
</li>
<li><p>Explicit acknowledgment of responsibility</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> keyword signals that the programmer is taking responsibility for
upholding invariants the compiler cannot verify</p></li>
<li><p>Prevents accidental use of <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> operations without conscious decision</p></li>
<li><p>Aligns with the principle of defense in depth in safety-critical systems</p></li>
</ul>
</li>
<li><p>Static analysis and tooling</p>
<ul>
<li><p>Tools like <code class="docutils literal notranslate"><span class="pre">cargo-geiger</span></code> <a class="citation-ref reference internal" href="#cite-gui_ZDLZzjeOwLSU-CARGO-GEIGER">[CARGO-GEIGER]</a>, <code class="docutils literal notranslate"><span class="pre">unsafe-inspect</span></code>,
and custom linters can automatically locate and count unsafe blocks</p></li>
<li><p>Enables metrics like “unsafe density” for safety assessments</p></li>
<li><p>Supports qualification evidence required by certification standards</p></li>
</ul>
</li>
<li><p>Traceability for certification</p>
<ul>
<li><p>Safety-critical certifications require demonstrating that hazardous operations are
identified and controlled</p></li>
<li><p>Visible <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> tokens provide direct linkage to safety cases and hazard analyses</p></li>
<li><p>Facilitates the required documentation that each unsafe operation has been reviewed
and justified</p></li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-4b47c70a">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_non_compliant_example docutils align-default" id="non_compl_ex_FdmuPXGZr4EP">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Non-Compliant Example</span></span>: </span><strong><span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#non_compl_ex_FdmuPXGZr4EP" title="non_compl_ex_FdmuPXGZr4EP">non_compl_ex_FdmuPXGZr4EP</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">draft</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">parent needs: <span class="parent_needs"><span><a class="reference internal" href="#gui_ZDLZzjeOwLSU" title="non_compl_ex_FdmuPXGZr4EP">gui_ZDLZzjeOwLSU</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p>The <code class="docutils literal notranslate"><span class="pre">#[no_mangle]</span></code> attribute is unsafe because it can be used to declare a function
identifier that conflicts with an existing symbol. This noncompliant example declares an
unmangled function named <code class="docutils literal notranslate"><span class="pre">convert</span></code> that is missing the required unsafe wrapper in Rust 2024.</p>
<p>This noncompliant example requires Rust Edition 2021 or earlier to compile.
In Rust Edition 2024, missing <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> wrappers cause compilation errors.</p>
<div class="rust-example-container docutils container">
<div class="rust-example-badges docutils container">
<span class="rust-example-badge rust-example-badge-compile-fail">compile fail</span></div>
<div class="rust-example-code highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// Undefined behavior by the linker or loader is possible</span>
<span class="c1">// if another &#39;convert&#39; function is defined.</span>
<span class="cp">#[no_mangle]</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">convert</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">convert</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<script type="application/json" class="rust-example-data">{"code": "// Undefined behavior by the linker or loader is possible\n// if another 'convert' function is defined.\n#[no_mangle]\nfn convert() {}\n\nfn main() {\n    convert();\n}", "displayCode": "// Undefined behavior by the linker or loader is possible\n// if another 'convert' function is defined.\n#[no_mangle]\nfn convert() {}\n\nfn main() {\n    convert();\n}", "hiddenLineNumbers": [], "edition": "2024", "channel": "stable", "version": "1.85.0", "expectedOutcome": "compile_fail", "expectedError": null, "runnable": true, "hasHiddenLines": false, "warnMode": "error"}</script></div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-e442353f">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_compliant_example docutils align-default" id="compl_ex_wR1FEyLRKmrr">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Compliant Example</span></span>: </span><strong><span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#compl_ex_wR1FEyLRKmrr" title="compl_ex_wR1FEyLRKmrr">compl_ex_wR1FEyLRKmrr</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">draft</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">parent needs: <span class="parent_needs"><span><a class="reference internal" href="#gui_ZDLZzjeOwLSU" title="compl_ex_wR1FEyLRKmrr">gui_ZDLZzjeOwLSU</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p>Rust Edition 2024 enforces that the <code class="docutils literal notranslate"><span class="pre">no_mangle</span></code> attribute requires an <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> keyword,
as shown in this compliant example.</p>
<p>NOTE: This code can still have undefined behavior if the <code class="docutils literal notranslate"><span class="pre">convert</span></code> function symbol is
defined more than once.</p>
<div class="rust-example-container docutils container">
<div class="rust-example-code highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="cp">#[unsafe(no_mangle)]</span><span class="w"> </span><span class="c1">// compliant</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">convert</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">convert</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<script type="application/json" class="rust-example-data">{"code": "#[unsafe(no_mangle)] // compliant\nfn convert() {}\n\nfn main() {\n    convert();\n}", "displayCode": "#[unsafe(no_mangle)] // compliant\nfn convert() {}\n\nfn main() {\n    convert();\n}", "hiddenLineNumbers": [], "edition": "2024", "channel": "stable", "version": "1.85.0", "expectedOutcome": "success", "expectedError": null, "runnable": true, "hasHiddenLines": false, "miri": {"mode": "skip", "pattern": null}, "warnMode": "error"}</script></div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-d66fecf5">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_non_compliant_example docutils align-default" id="non_compl_ex_FdmuPXGZr4EO">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Non-Compliant Example</span></span>: </span><strong><span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#non_compl_ex_FdmuPXGZr4EO" title="non_compl_ex_FdmuPXGZr4EO">non_compl_ex_FdmuPXGZr4EO</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">draft</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">parent needs: <span class="parent_needs"><span><a class="reference internal" href="#gui_ZDLZzjeOwLSU" title="non_compl_ex_FdmuPXGZr4EO">gui_ZDLZzjeOwLSU</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p>This noncompliant example misdeclares the <code class="docutils literal notranslate"><span class="pre">malloc</span></code> function in an <code class="docutils literal notranslate"><span class="pre">extern</span> <span class="pre">&quot;C&quot;</span></code> block
by specifying the type of the <code class="docutils literal notranslate"><span class="pre">size</span></code> parameter as <code class="docutils literal notranslate"><span class="pre">f32</span></code> instead of <code class="docutils literal notranslate"><span class="pre">usize</span></code>.</p>
<p>An <code class="docutils literal notranslate"><span class="pre">extern</span></code> block is unsafe because undefined behavior can occur if types or functions are
misdeclared. This is true even if the declarations are not used. This noncompliant example
requires Rust Edition 2021 or earlier to compile.</p>
<div class="rust-example-container docutils container">
<div class="rust-example-badges docutils container">
<span class="rust-example-badge rust-example-badge-compile-fail">compile fail</span></div>
<div class="rust-example-code highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">ffi</span><span class="p">;</span>

<span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// If &#39;malloc&#39; is otherwise defined with a &#39;usize&#39; argument, the compiler</span>
<span class="w">    </span><span class="c1">// may generate code for calls to this function using this incompatible declaration,</span>
<span class="w">    </span><span class="c1">// resulting in undefined behavior.</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">malloc</span><span class="p">(</span><span class="n">size</span><span class="p">:</span><span class="w"> </span><span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">*</span><span class="k">mut</span><span class="w"> </span><span class="n">ffi</span><span class="p">::</span><span class="n">c_void</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
</pre></div>
</div>
<script type="application/json" class="rust-example-data">{"code": "use std::ffi;\n\nextern \"C\" {\n    // If 'malloc' is otherwise defined with a 'usize' argument, the compiler\n    // may generate code for calls to this function using this incompatible declaration,\n    // resulting in undefined behavior.\n    fn malloc(size: f32) -> *mut ffi::c_void;\n}\n\nfn main() {}", "displayCode": "use std::ffi;\n\nextern \"C\" {\n    // If 'malloc' is otherwise defined with a 'usize' argument, the compiler\n    // may generate code for calls to this function using this incompatible declaration,\n    // resulting in undefined behavior.\n    fn malloc(size: f32) -> *mut ffi::c_void;\n}\n\nfn main() {}", "hiddenLineNumbers": [], "edition": "2024", "channel": "stable", "version": "1.85.0", "expectedOutcome": "compile_fail", "expectedError": null, "runnable": true, "hasHiddenLines": false, "warnMode": "error"}</script></div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-a01ecd87">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_compliant_example docutils align-default" id="compl_ex_wR1FEyLRKmrq">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Compliant Example</span></span>: </span><strong><span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#compl_ex_wR1FEyLRKmrq" title="compl_ex_wR1FEyLRKmrq">compl_ex_wR1FEyLRKmrq</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">draft</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">parent needs: <span class="parent_needs"><span><a class="reference internal" href="#gui_ZDLZzjeOwLSU" title="compl_ex_wR1FEyLRKmrq">gui_ZDLZzjeOwLSU</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p>Rust Edition 2024 enforces that <code class="docutils literal notranslate"><span class="pre">extern</span> <span class="pre">&quot;C&quot;</span></code> blocks require an <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> keyword,
as shown in this compliant example.</p>
<p>NOTE: This code can still have undefined behavior if the declared <code class="docutils literal notranslate"><span class="pre">malloc</span></code> function is
incompatible with the actual definition. To eliminate this undefined behavior, the
declaration for <code class="docutils literal notranslate"><span class="pre">malloc</span></code> used in this compliant example accepts one argument of type <code class="docutils literal notranslate"><span class="pre">usize</span></code>.</p>
<div class="rust-example-container docutils container">
<div class="rust-example-code highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">ffi</span><span class="p">;</span>

<span class="k">unsafe</span><span class="w"> </span><span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Here the assumption is that malloc is the one defined by C&#39;s stdlib.h</span>
<span class="w">    </span><span class="c1">// and that size_of::&lt;usize&gt;() == size_of::&lt;size_t&gt;()</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">malloc</span><span class="p">(</span><span class="n">size</span><span class="p">:</span><span class="w"> </span><span class="kt">usize</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">*</span><span class="k">mut</span><span class="w"> </span><span class="n">ffi</span><span class="p">::</span><span class="n">c_void</span><span class="p">;</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">free</span><span class="p">(</span><span class="n">ptr</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="k">mut</span><span class="w"> </span><span class="n">ffi</span><span class="p">::</span><span class="n">c_void</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="mi">1024</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">ptr</span><span class="p">.</span><span class="n">is_null</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">free</span><span class="p">(</span><span class="n">ptr</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<script type="application/json" class="rust-example-data">{"code": "use std::ffi;\n\nunsafe extern \"C\" {\n    // Here the assumption is that malloc is the one defined by C's stdlib.h\n    // and that size_of::<usize>() == size_of::<size_t>()\n    fn malloc(size: usize) -> *mut ffi::c_void;\n    fn free(ptr: *mut ffi::c_void);\n}\n\nfn main() {\n    unsafe {\n        let ptr = malloc(1024);\n        if !ptr.is_null() {\n            free(ptr);\n        }\n    }\n}", "displayCode": "use std::ffi;\n\nunsafe extern \"C\" {\n    // Here the assumption is that malloc is the one defined by C's stdlib.h\n    // and that size_of::<usize>() == size_of::<size_t>()\n    fn malloc(size: usize) -> *mut ffi::c_void;\n    fn free(ptr: *mut ffi::c_void);\n}\n\nfn main() {\n    unsafe {\n        let ptr = malloc(1024);\n        if !ptr.is_null() {\n            free(ptr);\n        }\n    }\n}", "hiddenLineNumbers": [], "edition": "2024", "channel": "stable", "version": "1.85.0", "expectedOutcome": "success", "expectedError": null, "runnable": true, "hasHiddenLines": false, "miri": {"mode": "skip", "pattern": null}, "warnMode": "error"}</script></div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-51e298b8">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_non_compliant_example docutils align-default" id="non_compl_ex_Hk3mNp5qRs7t">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Non-Compliant Example</span></span>: </span><strong><span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#non_compl_ex_Hk3mNp5qRs7t" title="non_compl_ex_Hk3mNp5qRs7t">non_compl_ex_Hk3mNp5qRs7t</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">draft</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">parent needs: <span class="parent_needs"><span><a class="reference internal" href="#gui_ZDLZzjeOwLSU" title="non_compl_ex_Hk3mNp5qRs7t">gui_ZDLZzjeOwLSU</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p>The <code class="docutils literal notranslate"><span class="pre">#[export_name]</span></code> and <code class="docutils literal notranslate"><span class="pre">#[link_section]</span></code> attributes can cause undefined behavior if
misused, as they affect symbol resolution and memory layout at link time. Without the
<code class="docutils literal notranslate"><span class="pre">unsafe</span></code> keyword, these hazards are not visible to reviewers or tools.</p>
<p>This noncompliant example has two separate problems. First, it uses an <code class="docutils literal notranslate"><span class="pre">#[export_name]</span></code>
attribute without an unsafe wrapper. This attribute controls the symbol name used during
linking. If another symbol with the same name exists, it causes undefined behavior.
Rust 2024 requires it to be marked <code class="docutils literal notranslate"><span class="pre">unsafe</span></code>.</p>
<p>The second problem is that this noncompliant example uses a <code class="docutils literal notranslate"><span class="pre">#[link_section]</span></code> attribute
without an unsafe wrapper. This attribute places the item in a specific linker section.
Incorrect section placement can cause undefined behavior (e.g., placing mutable data in
read-only sections, or interfering with special sections like <code class="docutils literal notranslate"><span class="pre">.init</span></code>).</p>
<p>This noncompliant example requires Rust Edition 2021 or earlier to compile.</p>
<div class="rust-example-container docutils container">
<div class="rust-example-badges docutils container">
<span class="rust-example-badge rust-example-badge-compile-fail">compile fail</span></div>
<div class="rust-example-code highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// Collides with the C library &#39;printf&#39; function</span>
<span class="cp">#[export_name = </span><span class="s">&quot;printf&quot;</span><span class="cp">]</span><span class="w">  </span><span class="c1">// noncompliant</span>

<span class="c1">// Missing unsafe marker - noncompliant in Rust 2024</span>
<span class="cp">#[link_section = </span><span class="s">&quot;.init_array&quot;</span><span class="cp">]</span><span class="w"> </span><span class="c1">// noncompliant</span>
<span class="k">static</span><span class="w"> </span><span class="n">DATA</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span><span class="w">  </span><span class="c1">// Corrupts initialization table!</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;DATA = {DATA}&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<script type="application/json" class="rust-example-data">{"code": "// Collides with the C library 'printf' function\n#[export_name = \"printf\"]  // noncompliant\n\n// Missing unsafe marker - noncompliant in Rust 2024\n#[link_section = \".init_array\"] // noncompliant\nstatic DATA: u32 = 42;  // Corrupts initialization table!\n\nfn main() {\n    println!(\"DATA = {DATA}\");\n}", "displayCode": "// Collides with the C library 'printf' function\n#[export_name = \"printf\"]  // noncompliant\n\n// Missing unsafe marker - noncompliant in Rust 2024\n#[link_section = \".init_array\"] // noncompliant\nstatic DATA: u32 = 42;  // Corrupts initialization table!\n\nfn main() {\n    println!(\"DATA = {DATA}\");\n}", "hiddenLineNumbers": [], "edition": "2024", "channel": "stable", "version": "1.85.0", "expectedOutcome": "compile_fail", "expectedError": null, "runnable": true, "hasHiddenLines": false, "warnMode": "error"}</script></div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-3d0649fa">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_compliant_example docutils align-default" id="compl_ex_xY2zAb3cDe4f">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Compliant Example</span></span>: </span><strong><span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#compl_ex_xY2zAb3cDe4f" title="compl_ex_xY2zAb3cDe4f">compl_ex_xY2zAb3cDe4f</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">draft</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">parent needs: <span class="parent_needs"><span><a class="reference internal" href="#gui_ZDLZzjeOwLSU" title="compl_ex_xY2zAb3cDe4f">gui_ZDLZzjeOwLSU</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p>The <code class="docutils literal notranslate"><span class="pre">#[export_name]</span></code> and <code class="docutils literal notranslate"><span class="pre">#[link_section]</span></code> attributes must use the <code class="docutils literal notranslate"><span class="pre">unsafe()</span></code> wrapper
to make their safety implications visible.</p>
<div class="rust-example-container docutils container">
<div class="rust-example-code highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// SAFETY: &#39;custom_symbol&#39; does not conflict with any other symbol</span>
<span class="cp">#[unsafe(export_name = </span><span class="s">&quot;custom_symbol&quot;</span><span class="cp">)]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">my_function</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">// SAFETY: Placing data in a specific section for embedded systems</span>
<span class="cp">#[unsafe(link_section = </span><span class="s">&quot;.noinit&quot;</span><span class="cp">)]</span>
<span class="k">static</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">PERSISTENT_DATA</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="kt">u8</span><span class="p">;</span><span class="w"> </span><span class="mi">256</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="mi">256</span><span class="p">];</span>

<span class="c1">// SAFETY: Custom section for shared memory</span>
<span class="cp">#[unsafe(link_section = </span><span class="s">&quot;.shared&quot;</span><span class="cp">)]</span>
<span class="k">static</span><span class="w"> </span><span class="n">SHARED_BUFFER</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="kt">u8</span><span class="p">;</span><span class="w"> </span><span class="mi">4096</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="mi">4096</span><span class="p">];</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">my_function</span><span class="p">();</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;shared buffer size = {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SHARED_BUFFER</span><span class="p">.</span><span class="n">len</span><span class="p">());</span>
<span class="w">    </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PERSISTENT_DATA</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<script type="application/json" class="rust-example-data">{"code": "// SAFETY: 'custom_symbol' does not conflict with any other symbol\n#[unsafe(export_name = \"custom_symbol\")]\npub fn my_function() {}\n\n// SAFETY: Placing data in a specific section for embedded systems\n#[unsafe(link_section = \".noinit\")]\nstatic mut PERSISTENT_DATA: [u8; 256] = [0; 256];\n\n// SAFETY: Custom section for shared memory\n#[unsafe(link_section = \".shared\")]\nstatic SHARED_BUFFER: [u8; 4096] = [0; 4096];\n\nfn main() {\n    my_function();\n    println!(\"shared buffer size = {}\", SHARED_BUFFER.len());\n    unsafe { let _ = PERSISTENT_DATA[0]; }\n}", "displayCode": "// SAFETY: 'custom_symbol' does not conflict with any other symbol\n#[unsafe(export_name = \"custom_symbol\")]\npub fn my_function() {}\n\n// SAFETY: Placing data in a specific section for embedded systems\n#[unsafe(link_section = \".noinit\")]\nstatic mut PERSISTENT_DATA: [u8; 256] = [0; 256];\n\n// SAFETY: Custom section for shared memory\n#[unsafe(link_section = \".shared\")]\nstatic SHARED_BUFFER: [u8; 4096] = [0; 4096];\n\nfn main() {\n    my_function();\n    println!(\"shared buffer size = {}\", SHARED_BUFFER.len());\n    unsafe { let _ = PERSISTENT_DATA[0]; }\n}", "hiddenLineNumbers": [], "edition": "2024", "channel": "stable", "version": "1.85.0", "expectedOutcome": "success", "expectedError": null, "runnable": true, "hasHiddenLines": false, "miri": {"mode": "skip", "pattern": null}, "warnMode": "error"}</script></div>
</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Enforcement</strong>
This guideline can be enforced through the following mechanisms:</p>
<ul class="simple">
<li><p><strong>Rust Edition 2024</strong>: Migrating to Rust Edition 2024 makes violations of this guideline
compilation errors for <code class="docutils literal notranslate"><span class="pre">extern</span></code> blocks and unsafe attributes.</p></li>
<li><p><strong>Compiler Lints</strong>: Enable the following lints:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">#![deny(unsafe_code)]</span></code> - Denies all unsafe code (use <code class="docutils literal notranslate"><span class="pre">#[allow(unsafe_code)]</span></code> for justified exceptions)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#![deny(unsafe_op_in_unsafe_fn)]</span></code> - Requires explicit unsafe blocks within unsafe functions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#![warn(unsafe_attr_outside_unsafe)]</span></code> - Warns about unsafe attributes without the <code class="docutils literal notranslate"><span class="pre">unsafe()</span></code> wrapper (pre-2024)</p></li>
</ul>
</li>
<li><p><strong>Static Analysis Tools</strong>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">cargo-geiger</span></code> - Counts and reports unsafe code usage</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cargo-audit</span></code> - Checks for known vulnerabilities in dependencies</p></li>
<li><p>Custom Clippy lints for project-specific requirements</p></li>
</ul>
</li>
<li><p><strong>Code Review</strong>: Manual review of all code containing <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> tokens should be
part of the development process, with documented justification for each usage.</p></li>
</ul>
<p><strong>Related guidelines</strong>
* Minimize the scope of unsafe blocks
* Document safety invariants for all unsafe code with <code class="docutils literal notranslate"><span class="pre">//</span> <span class="pre">SAFETY:</span></code> comments
* Prefer safe abstractions over raw unsafe code
* Use <code class="docutils literal notranslate"><span class="pre">#![forbid(unsafe_code)]</span></code> at crate level where possible, with explicit exceptions</p>
<div class="need_container docutils container" id="SNCB-76bf77fc">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_bibliography docutils align-default" id="bib_n8YJHvQf4mWx">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Bibliography</span></span>: </span><strong><span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#bib_n8YJHvQf4mWx" title="bib_n8YJHvQf4mWx">bib_n8YJHvQf4mWx</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">draft</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">parent needs: <span class="parent_needs"><span><a class="reference internal" href="#gui_ZDLZzjeOwLSU" title="bib_n8YJHvQf4mWx">gui_ZDLZzjeOwLSU</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><table class="bibliography-table docutils align-default">
<tbody>
<tr class="row-odd"><td><p><span class="target" id="cite-gui_ZDLZzjeOwLSU-RUST-EDITION-GUIDE"></span><strong class="bibentry-key">[RUST-EDITION-GUIDE]</strong><a href="javascript:void(0)" onclick="citationGoBack('cite-gui_ZDLZzjeOwLSU-RUST-EDITION-GUIDE')" class="bibentry-back" title="Return to citation">↩</a></p></td>
<td><p>The Rust Edition Guide. “Rust 2024.” <a class="reference external" href="https://doc.rust-lang.org/edition-guide/rust-2024/index.html">https://doc.rust-lang.org/edition-guide/rust-2024/index.html</a>.</p></td>
</tr>
<tr class="row-even"><td><p><span class="target" id="cite-gui_ZDLZzjeOwLSU-RUST-REF-UNSAFE-KEYWORD"></span><strong class="bibentry-key">[RUST-REF-UNSAFE-KEYWORD]</strong><a href="javascript:void(0)" onclick="citationGoBack('cite-gui_ZDLZzjeOwLSU-RUST-REF-UNSAFE-KEYWORD')" class="bibentry-back" title="Return to citation">↩</a></p></td>
<td><p>The Rust Reference. “Unsafe Keyword.” <a class="reference external" href="https://doc.rust-lang.org/reference/unsafe-keyword.html">https://doc.rust-lang.org/reference/unsafe-keyword.html</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="target" id="cite-gui_ZDLZzjeOwLSU-RUST-LINT-UNSAFE"></span><strong class="bibentry-key">[RUST-LINT-UNSAFE]</strong><a href="javascript:void(0)" onclick="citationGoBack('cite-gui_ZDLZzjeOwLSU-RUST-LINT-UNSAFE')" class="bibentry-back" title="Return to citation">↩</a></p></td>
<td><p>Rust Compiler Lint Documentation. “unsafe_code.” <a class="reference external" href="https://doc.rust-lang.org/rustc/lints/listing/allowed-by-default.html#unsafe-code">https://doc.rust-lang.org/rustc/lints/listing/allowed-by-default.html#unsafe-code</a>.</p></td>
</tr>
<tr class="row-even"><td><p><span class="target" id="cite-gui_ZDLZzjeOwLSU-RUSTNOMICON-MEET-SAFE"></span><strong class="bibentry-key">[RUSTNOMICON-MEET-SAFE]</strong><a href="javascript:void(0)" onclick="citationGoBack('cite-gui_ZDLZzjeOwLSU-RUSTNOMICON-MEET-SAFE')" class="bibentry-back" title="Return to citation">↩</a></p></td>
<td><p>The Rustonomicon. “Meet Safe and Unsafe.” <a class="reference external" href="https://doc.rust-lang.org/nomicon/meet-safe-and-unsafe.html">https://doc.rust-lang.org/nomicon/meet-safe-and-unsafe.html</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="target" id="cite-gui_ZDLZzjeOwLSU-ISO-26262"></span><strong class="bibentry-key">[ISO-26262]</strong><a href="javascript:void(0)" onclick="citationGoBack('cite-gui_ZDLZzjeOwLSU-ISO-26262')" class="bibentry-back" title="Return to citation">↩</a></p></td>
<td><p>International Organization for Standardization. “ISO 26262 - Road vehicles - Functional safety.” <a class="reference external" href="https://www.iso.org/standard/68383.html">https://www.iso.org/standard/68383.html</a>.</p></td>
</tr>
<tr class="row-even"><td><p><span class="target" id="cite-gui_ZDLZzjeOwLSU-DO-178C"></span><strong class="bibentry-key">[DO-178C]</strong><a href="javascript:void(0)" onclick="citationGoBack('cite-gui_ZDLZzjeOwLSU-DO-178C')" class="bibentry-back" title="Return to citation">↩</a></p></td>
<td><p>RTCA, Inc. “DO-178C: Software Considerations in Airborne Systems and Equipment Certification.” <a class="reference external" href="https://store.accuristech.com/standards/rtca-do-178c">https://store.accuristech.com/standards/rtca-do-178c</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="target" id="cite-gui_ZDLZzjeOwLSU-CARGO-GEIGER"></span><strong class="bibentry-key">[CARGO-GEIGER]</strong><a href="javascript:void(0)" onclick="citationGoBack('cite-gui_ZDLZzjeOwLSU-CARGO-GEIGER')" class="bibentry-back" title="Return to citation">↩</a></p></td>
<td><p>cargo-geiger contributors. “cargo-geiger: Detects usage of unsafe Rust.” <a class="reference external" href="https://github.com/geiger-rs/cargo-geiger">https://github.com/geiger-rs/cargo-geiger</a>.</p></td>
</tr>
<tr class="row-even"><td><p><span class="target" id="cite-gui_ZDLZzjeOwLSU-RUST-REF-EXTERN"></span><strong class="bibentry-key">[RUST-REF-EXTERN]</strong><a href="javascript:void(0)" onclick="citationGoBack('cite-gui_ZDLZzjeOwLSU-RUST-REF-EXTERN')" class="bibentry-back" title="Return to citation">↩</a></p></td>
<td><p>The Rust Reference. “External blocks.” <a class="reference external" href="https://doc.rust-lang.org/reference/items/external-blocks.html">https://doc.rust-lang.org/reference/items/external-blocks.html</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="target" id="cite-gui_ZDLZzjeOwLSU-RUST-REF-UNSAFE-ATTR"></span><strong class="bibentry-key">[RUST-REF-UNSAFE-ATTR]</strong><a href="javascript:void(0)" onclick="citationGoBack('cite-gui_ZDLZzjeOwLSU-RUST-REF-UNSAFE-ATTR')" class="bibentry-back" title="Return to citation">↩</a></p></td>
<td><p>The Rust Reference. “Unsafe attributes.” <a class="reference external" href="https://doc.rust-lang.org/reference/attributes.html#unsafe-attributes">https://doc.rust-lang.org/reference/attributes.html#unsafe-attributes</a>.</p></td>
</tr>
<tr class="row-even"><td><p><span class="target" id="cite-gui_ZDLZzjeOwLSU-FERROCENE-SPEC"></span><strong class="bibentry-key">[FERROCENE-SPEC]</strong><a href="javascript:void(0)" onclick="citationGoBack('cite-gui_ZDLZzjeOwLSU-FERROCENE-SPEC')" class="bibentry-back" title="Return to citation">↩</a></p></td>
<td><p>Ferrocene GmbH. “Ferrocene Language Specification.” <a class="reference external" href="https://spec.ferrocene.dev/">https://spec.ferrocene.dev/</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="target" id="cite-gui_ZDLZzjeOwLSU-RUST-REF-UNION"></span><strong class="bibentry-key">[RUST-REF-UNION]</strong><a href="javascript:void(0)" onclick="citationGoBack('cite-gui_ZDLZzjeOwLSU-RUST-REF-UNION')" class="bibentry-back" title="Return to citation">↩</a></p></td>
<td><p>The Rust Reference. “Unions.” <a class="reference external" href="https://doc.rust-lang.org/reference/items/unions.html">https://doc.rust-lang.org/reference/items/unions.html</a>.</p></td>
</tr>
<tr class="row-even"><td><p><span class="target" id="cite-gui_ZDLZzjeOwLSU-UCG-VALIDITY"></span><strong class="bibentry-key">[UCG-VALIDITY]</strong><a href="javascript:void(0)" onclick="citationGoBack('cite-gui_ZDLZzjeOwLSU-UCG-VALIDITY')" class="bibentry-back" title="Return to citation">↩</a></p></td>
<td><p>Rust Unsafe Code Guidelines. “Validity and Safety Invariant.” <a class="reference external" href="https://rust-lang.github.io/unsafe-code-guidelines/glossary.html#validity-and-safety-invariant">https://rust-lang.github.io/unsafe-code-guidelines/glossary.html#validity-and-safety-invariant</a>.</p></td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Attributes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../entities-and-resolution/index.html" class="btn btn-neutral float-right" title="Entities And Resolution" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Contributors to Coding Guidelines Subcommittee.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
        This site is powered through <a href="https://www.netlify.com">Netlify</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>